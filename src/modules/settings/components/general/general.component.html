<ng-container *ngIf="profile; else loading">
  <common-content>
    <common-content-header [title]="profileName" [subtitle]="'Profile: '+profileAlias" icon="cog"></common-content-header>
    <common-content-body>
      <div class="row">
        <div class="col-md-8 offset-md-2">
          <h4>Details</h4>
          <div class="form-group">
            <label>Profile Name
              <small class="text-muted">required</small>
            </label>
            <input autocomplete="false" [(ngModel)]="profile.name" (ngModelChange)="save();" class="form-control">
          </div>
          <hr>
          <h4>Remote database</h4>
          <div class="form-group">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" [(ngModel)]="profile.remoteSync" (ngModelChange)="save();">
              <label class="form-check-label" for="defaultCheck1">
                Enable real-time synchronization with remote.
              </label>
            </div>
            <small id="passwordHelpBlock" class="form-text text-muted">
              Use this option for make real-time backup of your data and access the same data from multiple devices.
              Some modules may require this option to work.
            </small>
          </div>
          <div class="form-group">
            <label class="form-label">Host</label>
            <input autocomplete="false" [disabled]="!profile.remoteSync" [(ngModel)]="profile.remoteHost"
              (ngModelChange)="save();" class="form-control">
          </div>
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <label class="form-label">Username</label>
                <input autocomplete="false" [disabled]="!profile.remoteSync" [(ngModel)]="profile.remoteUsername"
                  (ngModelChange)="save();" class="form-control">
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label class="form-label">Password</label>
                <input autocomplete="false" [disabled]="!profile.remoteSync" [(ngModel)]="profile.remotePassword"
                  (ngModelChange)="save();" class="form-control" type="password">
              </div>
            </div>
          </div>
          <hr>
          <h4>Export Data</h4>
          <p> You may export all profile data to json format as a backup or to move to another client.</p>
          <div class="d-flex">
            <button class="btn btn-outline-primary mr-2 ml-auto" (click)="export()">
              <fa-layers class="fa-fw">
                <fa-icon [icon]="['fas','cloud-download-alt']"></fa-icon>
              </fa-layers>
              Export
            </button>
          </div>
          <hr>
          <h4>Danger Zone</h4>
          <p> By deleting your profile, you immediately remove all local data(at your client). If you would like also
            to
            delete the remote data please check the option below. If you do not delete remote data, all data will be
            synced once this profile is recreated.</p>
          <div class="form-group form-check m-0">
            <input type="checkbox" class="form-check-input" id="deleteData" [(ngModel)]="deleteData">
            <label class="form-check-label" for="deleteData">Î™ understand that this is not reversable</label>
          </div>
          <div class="form-group form-check m-0">
            <input type="checkbox" class="form-check-input" id="deleteDataRemote" [(ngModel)]="deleteDataRemote">
            <label class="form-check-label" for="deleteDataRemote">Also delete remote data</label>
          </div>
          <div class="d-flex">
            <button class="btn btn-danger ml-auto" [disabled]="!deleteData" (click)="delete()">
              <fa-layers class="fa-fw">
                <fa-icon [icon]="['fas','trash-alt']"></fa-icon>
              </fa-layers>
              Remove
            </button>
          </div>
        </div>
      </div>
    </common-content-body>
  </common-content>
</ng-container>
<ng-template #loading>
  <common-loader animation="sk-cube"></common-loader>
</ng-template>
