<div class="loader" *ngIf="!presentation"></div>
<div class="content d-flex flex-column justify-content-start" *ngIf="presentation">
  <app-content-header [title]="(presentation.title || '-')" [icon]="'tv'" [settingsMenu]="settingsMenu"></app-content-header>
  <div class="content-body">
    <div class="container">
      <div class="row">

        <div class="col-md-4">
          <div class="card mb-2">
            <div class="card-body">
              <dl>
                <dt>Description
                  <a href="javascript:void(0)" class="descCollToggle" (click)="descOpen = !descOpen">
                    <span *ngIf="descOpen">
                      <span class="fa fa-angle-double-up"></span> LESS
                    </span>
                    <span *ngIf="!descOpen">
                      <span class="fa fa-angle-double-down"></span> MORE
                    </span>
                  </a>
                </dt>
                <dd class="descColl" [ngClass]="{'open':descOpen}">
                  {{presentation.description}}
                </dd>
                <dt>Statistics</dt>
                <dd>
                  <ul class="list-unstyled">
                    <li>Total
                      <strong>{{presentation.pages.length}}</strong> pages
                    </li>
                    <li>Total
                      <strong>{{statistics.totalFilesCount}}</strong> files of
                      <strong>{{statistics.totalFilesBytesize | bytes}}</strong> size
                    </li>
                  </ul>
                </dd>
              </dl>
            </div>
            <div class="list-group list-group-flush">
              <a href="javascript:void(0)" [ngClass]="{'active': activePageIndex==i}" (click)="setPageIndex(i)" class="list-group-item"
                *ngFor="let page of presentation.pages; let i = index;">
                {{page.title}}
                <small class="pull-right text-muted">#{{i+1}}</small>
              </a>
              <button class="btn btn-xs btn-outline-primary" (click)="addPage()">
                <span class="fa fa-plus fa-fw"></span> Add Page
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-8">

          <app-empty-panel *ngIf="!presentation.pages" message="No pages were found"></app-empty-panel>

          <div *ngIf="presentation.pages">
            <div class="card mb-4" *ngIf="presentation.pages[activePageIndex]">
              <div class="card-body">
                <h4 class="card-title">
                  {{presentation.pages[activePageIndex].title}}
                  <small class="text-secondary">page: #{{activePageIndex+1}}</small>
                </h4>
                <div *ngIf="presentation.pages[activePageIndex].description">
                  {{presentation.pages[activePageIndex].description}}
                </div>
              </div>
            </div>
            <div *ngIf="presentation.pages[activePageIndex].type=='BGIMG' && imageData">
              <img class="img-thumbnail img-fluid" [src]="imageData">
            </div>
          </div>
        </div>
      </div>
    </div>

    <pre>{{activePageIndex|json:2}}</pre>
    <pre>{{presentation|json:2}}</pre>
  </div>
</div>
