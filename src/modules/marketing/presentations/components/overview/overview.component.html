<app-content>
  <app-content-header title="Presentations" icon="desktop"></app-content-header>

  <app-content-body>

    <div class="btn-toolbar mb-4">
      <div class="btn-group mr-2">
        <button type="button" class="btn btn-primary" (click)="create()">
          <span class="fa fa-plus-circle fa-fw"></span> Create</button>
      </div>
    </div>

    <div *ngIf="presentations$ | async as presentations; else loading">
      <div *ngIf="presentations.length; else noItems">
        <table class="table table-hover">
          <tbody>
            <tr *ngFor="let presentation of presentations">
              <td style="width:150px">
                <div *ngIf="presentationImages[presentation._id] | async as image; else loading2">
                  <div *ngIf="image; else noItems">
                    <img class="img-thumbnail mr-3" [src]="image">
                  </div>
                </div>
              </td>
              <td class="flex-column align-items-start mb-auto">
                <h5 class="mb-0">{{presentation.title}}
                  <small class="text-secondary">edit {{getLastEdit(presentation)}}</small>
                </h5>
                <div *ngIf="presentation.description">
                  <hr class="mt-1 mb-2">
                  <p class="text-muted">{{presentation.description | ellipsis:250}}</p>
                </div>
              </td>
              <td class="text-center" style="width:100px">
                <a [routerLink]="['/presentations/item',presentation._id]" class="btn btn-outline-primary">Open</a>
              </td>
            </tr>
          </tbody>
        </table>
        <app-debug-panel [data]="presentations"></app-debug-panel>
      </div>
    </div>
    <ng-template #noItems>
      <app-empty-panel message="You don't have any presentations yet" submessage="Click create to add your first one" icon="desktop"></app-empty-panel>
    </ng-template>
    <ng-template #loading>
      <div class="text-center m-4 p-4">
        <span class="fa fa-refresh fa-spin fa-5x text-secondary"></span>
      </div>
    </ng-template>
    <ng-template #loading2>
      <div class="text-center m-2 p-2">
        <span class="fa fa-refresh fa-spin fa-3x text-secondary"></span>
      </div>
    </ng-template>
    <ng-template #noImg>
      <div class="img-empty">
        <span class="fa fa-picture-o"></span>
      </div>
    </ng-template>
  </app-content-body>
</app-content>
