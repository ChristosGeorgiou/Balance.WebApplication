<div class="card-wrapper">
  <div class="card">
    <div class="card-header d-flex">
      <button type="button" class="btn btn-outline-secondary btn-sm mr-3" [routerLink]="['/profiles']">
        <span class="fa fa-chevron-left"></span>
      </button>
      <h4 class="m-0">{{profile.name}}</h4>
    </div>
    <div class="card-body">
      <fieldset>
        <h4>General</h4>
        <label>Name
          <small class="text-muted">required</small>
        </label>
        <input [(ngModel)]="profileEdit.name" class="form-control">
      </fieldset>

      <fieldset>
        <h4>Database</h4>
        <p>Configure the remote CouchDB for data sync</p>
        <div class="row">
          <div class="col-6">
            <div class="form-group">
              <label>Host</label>
              <input [(ngModel)]="profileEdit.database.host" class="form-control">
            </div>
          </div>
          <div class="col-6">
            <div class="form-group">
              <label>Prefix</label>
              <input [(ngModel)]="profileEdit.database.prefix" class="form-control">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-6">
            <div class="form-group">
              <label>Username</label>
              <input [(ngModel)]="profileEdit.database.user" class="form-control">
            </div>
          </div>
          <div class="col-6">
            <div class="form-group">
              <label>Password</label>
              <input [(ngModel)]="profileEdit.database.pass" class="form-control" type="password">
            </div>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <h4>Modules</h4>

        <ul class="list-group list-group-flush">
          <li class="list-group-item px-0" *ngFor="let module of modules">
            <div class="d-flex align-items-center">
              <div class="w-100">
                {{module.title}}
                <em>
                  <small class="text-muted">{{module.id}}</small>
                </em>
                <small class="badge badge-success" *ngIf="activeModules[module.id]">ACTIVE</small>
                <br>
                <small class="text-muted" *ngIf="module.description">{{module.description}}</small>
              </div>
              <button type="button" class="btn btn-outline-dark btn-sm" (click)="openConfig(module.id)">
                <span class="fa fa-cog"></span>
              </button>
            </div>
          </li>
        </ul>
      </fieldset>

      <fieldset>
        <h4>Backup / Restore</h4>
        <p>You may export all profile data to json format as a backup or to move them to more clients.</p>
        <div class="d-flex justify-content-center">
          <button class="btn btn-outline-secondary mr-2" (click)="backup()">
            <span class="fa fa-cloud-download-alt"></span> Backup</button>
          <button class="btn btn-outline-secondary" (click)="restore()">
            <span class="fa fa-cloud-upload-alt"></span> Restore</button>
        </div>
      </fieldset>

      <fieldset class="text-danger">
        <h4>Danger Zone</h4>
        <p>By deleting your profile, you immediately remove all local data(at your client). If you would like also to delete
          the remote data please check the option below. If you do not delete remote data, all data will be synced once this
          profile is recreated.</p>
        <div class="d-flex">
          <div class="d-flex flex-column w-100">
            <div class="form-group form-check m-0">
              <input type="checkbox" class="form-check-input" id="deleteData" [(ngModel)]="deleteData">
              <label class="form-check-label" for="deleteData">Î™ understand that this is not reversable</label>
            </div>
            <div class="form-group form-check m-0">
              <input type="checkbox" class="form-check-input" id="deleteDataRemote" [(ngModel)]="deleteDataRemote">
              <label class="form-check-label" for="deleteDataRemote">Also delete remote data</label>
            </div>
          </div>
          <button class="btn btn-danger" [disabled]="!deleteData">
            <span class="fa fa-trash-alt"></span> Delete Profile</button>
        </div>
      </fieldset>

    </div>
  </div>
  <app-footer></app-footer>
</div>
