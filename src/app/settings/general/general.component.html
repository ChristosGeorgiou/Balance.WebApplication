<ng-container *ngIf="profile; else loading">
  <app-content>
    <app-content-header title="General" icon="cog"></app-content-header>
    <app-content-body>
      <div class="list-group-settings">
        <div class="list-group-item">
          <h5>Profile Information</h5>
          <dl class="row mb-0">
            <dt class="col-sm-3 text-right">Key:</dt>
            <dd class="col-sm-9">{{profile.id}}&nbsp;</dd>
            <dt class="col-sm-3 text-right">Name:</dt>
            <dd class="col-sm-9 d-flex">
              <span #newname class="bg-light rounded d-block flex-grow-1 pl-1"
                contenteditable="true">{{profile.name}}</span>
              <div style="width:50px">
                <fa-icon (click)="rename(newname.innerText)" icon="save" class="ml-2 text-primary"></fa-icon>
              </div>
            </dd>
            <dt class="col-sm-3 text-right">Created:</dt>
            <dd class="col-sm-9">{{profile.createdAt|date:"short"}}&nbsp;</dd>
          </dl>
        </div>
        <div class="list-group-item">
          <h5>Remote</h5>
          <p>
            Use this option for make real-time backup of your data and access from multiple devices.
            Some modules may require this option for them to work.
          </p>
          <ng-container *ngIf="profile.remote">
            <dl class="row">
              <dt class="col-sm-3 text-right">Enabled:</dt>
              <dd class="col-sm-9">
                <ng-container [ngSwitch]="profile.remote.enabled">
                  <ng-container *ngSwitchCase="true">
                    <span class="badge badge-success" (click)="toggleRemote()">ENABLED</span>
                  </ng-container>
                  <ng-container *ngSwitchCase="false">
                    <span class="badge badge-danger" (click)="toggleRemote()">DISABLED</span>
                  </ng-container>
                </ng-container>
              </dd>
              <dt class="col-sm-3 text-right">Key:</dt>
              <dd class="col-sm-9">{{profile.remote.key}}&nbsp;</dd>
              <dt class="col-sm-3 text-right">Server:</dt>
              <dd class="col-sm-9">{{profile.remote.server || ' - '}}&nbsp;</dd>
              <dt class="col-sm-3 text-right">DB:</dt>
              <dd class="col-sm-9">{{profile.remote.db || ' - '}}&nbsp;</dd>
              <dt class="col-sm-3 text-right">Username:</dt>
              <dd class="col-sm-9">{{profile.remote.username || ' - '}}&nbsp;</dd>
            </dl>
          </ng-container>
          <button class="btn btn-action btn-primary" (click)="remote()">Edit Remote</button>
        </div>
        <div class="list-group-item">
          <h5>Danger Zone</h5>
          <p>
            Deleting your profile, you immediately remove all local data. If you would like also
            to delete the remote data please check the appropriate option below. If you do not delete remote data, all
            data will be synced once again if profile is recreated or imported.
          </p>
          <div class="form-group form-check m-0">
            <input type="checkbox" class="form-check-input" id="deleteData" [(ngModel)]="deleteData">
            <label class="form-check-label" for="deleteData">Î™ understand that this is not reversable</label>
          </div>
          <div class="form-group form-check m-0">
            <input type="checkbox" class="form-check-input" id="deleteDataRemote" [(ngModel)]="deleteDataRemote">
            <label class="form-check-label" for="deleteDataRemote">Also delete remote data</label>
          </div>
          <button class="btn btn-action btn-danger" [disabled]="!deleteData" (click)="delete()">
            Remove Profile
          </button>
        </div>
        <div class="list-group-item">
          <app-debug [data]="profile"></app-debug>
        </div>
      </div>
    </app-content-body>
  </app-content>
</ng-container>
<ng-template #loading>
  <app-spinner></app-spinner>
</ng-template>