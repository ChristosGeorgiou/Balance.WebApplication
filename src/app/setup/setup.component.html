<div class="wrapper">
  <div class="box">
    <div class="card">
      <div class="breadcrumb" style="overflow-x:auto;" *ngIf="stepIndex != 0">
        <div style="min-width: 350px;">
          <span class="breadcrumb-item" *ngFor="let step of steps; let i = index;"
            [ngClass]="{active: stepIndex === i }">
            {{step.label}}</span>
        </div>
      </div>

      <div class="card-body overflow-hidden" *ngIf="steps[stepIndex].label=='Setup'">
        <div class="text-center">
          <h1 class="display-4 mt-4">Welcome!</h1>
        </div>
        <div class="alert alert-warning text-center">
          <strong>WARNING: UNDER DEVELOPMENT AND NOT READY FOR PRODUCTION USE</strong>
        </div>
        <p>Balnc (balance) is an free open source business management suite for small companies and freelancers. It is
          included a collection of business modules and also provides the tools for extend them or build new ones.</p>
        <p>All features and modules are running local at the users machine. This improves speed of loading any
          part of the app to magnitute similar of the old buisness installable applications.</p>
        <p> Even the data of the app is stored at the client, in a local database. It is not require a database
          server for storing data. As so, data are store at the user's machine and are not visible to any third
          parties and the speed is improved even more.</p>
      </div>

      <div class="card-body" *ngIf="steps[stepIndex].label=='Profile'">
        <div class="row">
          <div class="col-7">
            <h2>Profile</h2>
            <div class="form-group">
              <label>Profile Name</label>
              <input autocomplete="false" [(ngModel)]="profile.name" class="form-control form-control-lg"
                placeholder="Enter a friendly name...">
            </div>
            <ul class="list-unstyled text-center">
              <li>
                <a href="javascript:" ngxFilePicker accept="application/json" (filePick)="importFile($event)">Import</a>
                a
                file
                backup</li>
              <li>
                <a href="javascript:" (click)="addDemo()">Start</a> with a demo profile</li>
            </ul>
          </div>
          <div class="col-5">
            <div class="alert alert-primary">
              <h4>What is this?</h4>
              <p>
                Profile is a group of settings and data. Every profile is like another setup of its own plugins and
                configuration. Your data are stored in the browser and are not by default synced to any server. You
                should
                keep backups or enable sync mode with a backup server.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="card-body" *ngIf="steps[stepIndex].label=='Sync'">
        <div class="row">
          <div class="col-7">
            <h2>Sync</h2>
            <div class="form-group form-check">
              <input id="remoteSync" class="form-check-input" type="checkbox" [(ngModel)]="profile.remoteSync">
              <label class="form-check-label" for="remoteSync">
                Enable real-time synchronization
              </label>
            </div>
            <div class="form-group">
              <label>Remote Host</label>
              <input autocomplete="false" [disabled]="!profile.remoteSync" [(ngModel)]="profile.remoteHost"
                class="form-control" placeholder="https://db.myhost.com">
            </div>
            <div class="row">
              <div class="col-6">
                <div class="form-group">
                  <label>Username</label>
                  <input autocomplete="false" [disabled]="!profile.remoteSync" [(ngModel)]="profile.remoteUsername"
                    class="form-control">
                </div>
              </div>
              <div class="col-6">
                <div class="form-group">
                  <label>Password</label>
                  <input autocomplete="false" [disabled]="!profile.remoteSync" [(ngModel)]="profile.remotePassword"
                    class="form-control" type="password">
                </div>
              </div>
            </div>
          </div>
          <div class="col-5">
            <div class="alert alert-primary">
              <h4>What is this?</h4>
              <p>
                If you enable this option local data will be sync over the internet with the remote database server.
                This
                will allow you to real-time backup your data and have access from multiple devices.
              </p>
              <p>
                <em>Currently only CouchDB is supported.</em>
              </p>
            </div>
          </div>
        </div>

      </div>

      <div class="card-body p-0" *ngIf="steps[stepIndex].label=='Plugins'">
        <h3>Plugins</h3>
        <div class="list-group list-group-flush">
          <div class="list-group-item" *ngFor="let plugin of plugins">
            <div class="row">
              <div class="col-sm-9 d-flex align-items-center">
                <div class="flex-grow-1">
                  <h5 class="mb-0">
                    <fa-icon [icon]="plugin.picon"></fa-icon>
                    {{plugin.title}}
                  </h5>
                  <small class="text-muted">{{plugin.description}}</small>
                </div>
              </div>
              <div class="col-sm-3 d-flex align-items-center">
                <button *ngIf="!profile.plugins[plugin.id]" type="button"
                  class="btn btn-outline-primary btn-sm ml-auto mt-2" style="min-width:100px;"
                  (click)="profile.plugins[plugin.id]=true;">
                  Activate
                </button>
                <button *ngIf="profile.plugins[plugin.id]" type="button"
                  class="btn btn-outline-danger btn-sm ml-auto mt-2" style="min-width:100px;"
                  (click)="profile.plugins[plugin.id]=false;">
                  Deactivate
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card-body" *ngIf="steps[stepIndex].label=='Finish'">
        <pre class="preview">{{profile|json:2}}</pre>
      </div>
      <div class="card-footer p-2">
        <button class="btn btn-light" (click)="back()" *ngIf="stepIndex != 0">
          <fa-icon [icon]="['fas','angle-left']"></fa-icon>
          Back
        </button>
        <button class="btn btn-primary float-right" (click)="next()" *ngIf="stepIndex !== steps.length - 1">
          Next
          <fa-icon [icon]="['fas','angle-right']"></fa-icon>
        </button>
        <button class="btn btn-primary float-right" (click)="finish()" *ngIf="stepIndex === steps.length - 1">
          Finish
          <fa-icon [icon]="['fas','check-circle']"></fa-icon>
        </button>
      </div>
    </div>
  </div>
  <div class="footer">
    <ul class="list-inline m-0">
      <li class="list-inline-item">Balnc v{{configService.version}}</li>
      <li class="list-inline-item">
        <a href="https://github.com/christosgeorgiou/balnc" target="_blank" rel="noopener" class="text-muted">
          source
        </a>
      </li>
      <li class="list-inline-item">
        <a href="https://github.com/ChristosGeorgiou/balnc/blob/master/LICENSE" target="_blank" rel="noopener"
          class="text-muted">
          license
        </a>
      </li>
    </ul>
  </div>
</div>