!function(){"use strict";angular.module("app.contacts",["leaflet-directive","chart.js"])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.contacts.company",config:{abstract:!0,url:"/company/:id",templateUrl:"src/contacts/company.view/_common/_layout.html",controller:"ContactsCompanyController"}},{state:"app.contacts.company.overview",config:{title:"overview",url:"/overview",templateUrl:"src/contacts/company.view/overview/view.html",controller:"ContactsCompanyOverviewController"}},{state:"app.contacts.company.persons",config:{title:"persons",url:"/persons",templateUrl:"src/contacts/company.view/persons/view.html",controller:"ContactsCompanyPersonsController"}},{state:"app.contacts.company.events",config:{title:"events",url:"/events",templateUrl:"src/contacts/company.view/events/view.html",controller:"ContactsCompanyEventsController"}},{state:"app.contacts.company.transactions",config:{title:"transactions",url:"/transactions",templateUrl:"src/contacts/company.view/transactions/view.html",controller:"ContactsCompanyTransactionsController"}},{state:"app.contacts.company.files",config:{title:"files",url:"/files",templateUrl:"src/contacts/company.view/files/view.html",controller:"ContactsCompanyFilesController"}},{state:"app.contacts.company.map",config:{title:"map",url:"/map",templateUrl:"src/contacts/company.view/map/view.html",controller:"ContactsCompanyMapController"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.contacts").run(RoutesConfig)}(),function(){"use strict";function CompanyModals(modalHelper){function getModals(){return[{modal:"EditLogo",config:{templateUrl:"src/contacts/company.view/editlogo/view.html",controller:"ContactsCompanyEditLogoController",size:"md"}}]}return modalHelper.configureModals(getModals())}angular.module("app.contacts").factory("CompanyModals",CompanyModals),CompanyModals.$inject=["modalHelper"]}(),function(){"use strict";function ContactsCompanyController($stateParams,Company,CompanyTabs,CompanyModals){function activate(){vm.Company=Company.findById({id:$stateParams.id})}function EditLogo(){CompanyModals.EditLogo({Company:vm.Company})}var vm=this;vm.Tabs=CompanyTabs,vm.EditLogo=EditLogo,vm.Print=function(){var docDefinition={content:"ελλάδα Ά an sample PDF printed with pdfMakeThis is an sample PDF printed with pdfMakeThis is an sample PDF printed with pdfMake"};pdfMake.createPdf(docDefinition).open()},activate()}ContactsCompanyController.$inject=["$stateParams","Company","CompanyTabs","CompanyModals"],angular.module("app.contacts").controller("ContactsCompanyController",ContactsCompanyController)}(),function(){"use strict";angular.module("app.contacts").constant("CompanyTabs",[{heading:{icon:"bars",title:"Overview"},route:"app.contacts.company.overview"},{heading:{icon:"money",class:"hidden-xs",title:"Transactions"},route:"app.contacts.company.transactions"},{heading:{icon:"files-o",class:"hidden-xs",title:"Files"},route:"app.contacts.company.files"},{heading:{icon:"map-o",class:"hidden-xs",title:"Map"},route:"app.contacts.company.map"}])}(),function(){"use strict";function ContactsCompanyTransactionsController($stateParams,Transaction,DataFilters,ChartGroups){function activate(){vm.LoadTransactions()}function LoadTransactions(){return vm.loading=!0,Transaction.find({filter:vm.filter}).$promise.then(function(data){var _total=0;_.each(data,function(transaction){_total+=transaction.amount,transaction.total=_total}),vm.Transactions=data,vm.ReloadChart()}).finally(function(){vm.loading=!1})}function ReloadChart(){console.log(vm.chart.params.group),vm.chart.labels=[],vm.chart.data[0]=[];var grouped_transactions=_.groupBy(vm.Transactions,function(transaction){return moment(transaction.date).format(ChartGroups[vm.chart.params.group].value)});_.each(grouped_transactions,function(transactions,keydate){var _date_total=_.reduce(transactions,function(total,transaction){return Math.round(transaction.amount+total)},0);vm.chart.labels.push(keydate),vm.chart.data[0].push(_date_total)})}var vm=this;vm.filter={where:{companyId:$stateParams.id},order:"date ASC"},vm.chart={labels:[],data:[[]],params:{group:"weekly"},options:{bezierCurve:!1,datasetFill:!1}},vm.params={filter:"one_month"},vm.DataFilters=DataFilters,vm.ChartGroups=ChartGroups,vm.LoadTransactions=LoadTransactions,vm.ReloadChart=ReloadChart,activate()}ContactsCompanyTransactionsController.$inject=["$stateParams","Transaction","DataFilters","ChartGroups"],angular.module("app.contacts").controller("ContactsCompanyTransactionsController",ContactsCompanyTransactionsController)}(),function(){"use strict";angular.module("app.contacts").constant("DataFilters",{one_month:{alias:"one_month",label:"+-1 Month",value:{}},three_months:{alias:"three_months",label:"+-3 Months",value:{}},all:{alias:"all",label:"All Transactions",value:!1}}).constant("ChartGroups",{daily:{alias:"daily",label:"Daily",value:"DD/MM/YYYY"},weekly:{alias:"weekly",label:"Weekly",value:"[W]ww MM/YYYY"},monthly:{alias:"monthly",label:"Monthly",value:"MM/YYYY"}})}(),function(){"use strict";function ContactsCompanyPersonsController($stateParams,Person){function activate(){_loadPersons()}function _loadPersons(){return vm.loading=!0,Person.find({filter:{where:{companyId:$stateParams.id},order:"fullname ASC"}}).$promise.then(function(data){vm.Persons=data}).finally(function(){vm.loading=!1})}var vm=this;activate()}ContactsCompanyPersonsController.$inject=["$stateParams","Person"],angular.module("app.contacts").controller("ContactsCompanyPersonsController",ContactsCompanyPersonsController)}(),function(){"use strict";function ContactsCompanyOverviewController($stateParams,Event){function activate(){_loadEvents()}function reload(){activate()}function _loadEvents(){return vm.loading=!0,Event.find({filter:{where:{date:{gt:_ranges[vm.params.range].from,lt:_ranges[vm.params.range].to},companyId:$stateParams.id},order:"date DESC"}}).$promise.then(function(data){vm.Events=data}).finally(function(){vm.loading=!1})}var vm=this;vm.reload=reload,vm.params={range:"WEEK"};var _ranges={WEEK:{from:moment().subtract(7,"days"),to:moment().add(7,"days")},HALFMONTH:{from:moment().subtract(15,"days"),to:moment().add(15,"days")},MONTH:{from:moment().subtract(1,"month"),to:moment().add(1,"month")}};activate()}ContactsCompanyOverviewController.$inject=["$stateParams","Event"],angular.module("app.contacts").controller("ContactsCompanyOverviewController",ContactsCompanyOverviewController)}(),function(){"use strict";function ContactsCompanyMapController($stateParams,Company,$timeout){function activate(){vm.loading=!0,vm.center={},vm.markers={},Company.findById({id:$stateParams.id}).$promise.then(function(company){vm.Company=company,$timeout(function(){vm.center={lat:parseFloat(company.location.lat),lng:parseFloat(company.location.lon),zoom:14},vm.markers={company:{message:company.name+"<br/><small>"+vm.Company.location.street+"</small>",lat:parseFloat(company.location.lat),lng:parseFloat(company.location.lon),opacity:.8,focus:!0}},vm.loading=!1},1e3)})}var vm=this;activate()}ContactsCompanyMapController.$inject=["$stateParams","Company","$timeout"],angular.module("app.contacts").controller("ContactsCompanyMapController",ContactsCompanyMapController)}(),function(){"use strict";function ContactsCompanyFilesController($stateParams,Container,FilesModals){function activate(){_loadFiles()}function UploadFiles(){FilesModals.AddFiles({Label:"Company",Container:vm.container}).then(function(){_loadFiles()})}function _loadFiles(){return vm.loading=!0,Container.getFiles({container:vm.container}).$promise.then(function(data){vm.Files=data}).finally(function(){vm.loading=!1})}var vm=this;vm.container=$stateParams.id,vm.UploadFiles=UploadFiles,activate()}ContactsCompanyFilesController.$inject=["$stateParams","Container","FilesModals"],angular.module("app.contacts").controller("ContactsCompanyFilesController",ContactsCompanyFilesController)}(),function(){"use strict";function ContactsCompanyEditLogoController($uibModalInstance,ModalParams,Company,FileUploader){function activate(){}function Save(){vm.Uploader.uploadItem(0)}var vm=this;vm.Company=ModalParams.Company,vm.Uploader=new FileUploader({vm:vm,url:"/api/Containers/"+vm.Company.id+"/upload"}),vm.Uploader.onCompleteItem=function(item,response,status,headers){vm.Company.logo="/api/Containers/"+vm.Company.id+"/download/"+item.file.name,Company.upsert(vm.Company)},vm.Uploader.onAfterAddingFile=function(item){},vm.Save=Save,activate()}ContactsCompanyEditLogoController.$inject=["$uibModalInstance","ModalParams","Company","FileUploader"],angular.module("app.contacts").controller("ContactsCompanyEditLogoController",ContactsCompanyEditLogoController)}(),function(){"use strict";angular.module("app._common",[])}(),function(){"use strict";function routerHelperProvider($locationProvider,$stateProvider,$urlRouterProvider){function RouterHelper($state){function configureStates(states,otherwisePath){states.forEach(function(state){var config={controllerAs:"vm"};angular.extend(config,state.config),config.views&&_.each(config.views,function(item){item.controllerAs="vm"}),$stateProvider.state(state.state,config)}),otherwisePath&&!hasOtherwise&&(hasOtherwise=!0,$urlRouterProvider.otherwise(otherwisePath))}function getStates(){return $state.get()}var hasOtherwise=!1,service={configureStates:configureStates,getStates:getStates};return service}this.$get=RouterHelper,RouterHelper.$inject=["$state"]}routerHelperProvider.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],angular.module("app._common").provider("routerHelper",routerHelperProvider)}(),function(){"use strict";function modalHelperProvider(){function modalHelper($uibModal,$q){function configureModals(modals){var _ret={};return angular.forEach(modals,function(modal){_ret[modal.modal]=function(obj){function ModalResultComplete(response){return response}function ModalResultFailed(reason){if(reason&&"backdrop click"!==reason)return $q.reject()}var config={controllerAs:"vm",resolve:{ModalParams:function(){return obj||{}}}};return angular.extend(config,modal.config),$uibModal.open(config).result.then(ModalResultComplete).catch(ModalResultFailed)}}),_ret}var service={configureModals:configureModals};return service}modalHelper.$inject=["$uibModal","$q"],this.$get=modalHelper}angular.module("app._common").provider("modalHelper",modalHelperProvider)}(),function(){"use strict";function configHelperProvider(){function ConfigHelper(){function notifyConfig(configName,message){message=message||{},console.log("%c CONFIG - "+configName+" ","background: #9C27B0; color: #FFF",message)}var service={notifyConfig:notifyConfig};return service}this.$get=ConfigHelper,ConfigHelper.$inject=[]}angular.module("app._common").provider("configHelper",configHelperProvider)}(),function(){"use strict";function numberFixedLen(){return function(a,b){return(1e4+a+"").slice(-b)}}angular.module("app._common").filter("numberFixedLen",numberFixedLen)}(),function(){"use strict";function join(){return function(array,separator){return array?(separator||(separator=", "),array.join(separator)):""}}angular.module("app._common").filter("join",join)}(),function(){"use strict";function fromNow(){return function(date){return moment(date).fromNow()}}angular.module("app._common").filter("fromNow",fromNow)}(),function(){"use strict";function fileicon(){var _icons={"application/pdf":"fa-file-pdf-o","application/powerpoint":"fa-file-powerpoint-o","application/x-msword":"fa-file-word-o","application/x-msexcel":"fa-file-excel-o","application/x-mspowerpoint":"fa-file-powerpoint-o","audio/x-mpeg-3":"fa-file-audio-o","image/gif":"fa-file-image-o","image/png":"fa-file-image-o","image/tiff":"fa-file-image-o","image/jpeg":"fa-file-image-o","video/avi":"fa-file-video-o","video/mpeg":"fa-file-video-o","video/msvideo":"fa-file-video-o","video/quicktime":"fa-file-video-o","application/zip":"fa-file-zip-o"};return function(a){return _icons[a]||"fa-file-o"}}angular.module("app._common").filter("fileicon",fileicon)}(),function(){"use strict";function bytes(){return function(bytes,precision){if(isNaN(parseFloat(bytes))||!isFinite(bytes))return"-";if(0===bytes)return"Empty";"undefined"==typeof precision&&(precision=1);var units=["bytes","kB","MB","GB","TB","PB"],number=Math.floor(Math.log(bytes)/Math.log(1024));return(bytes/Math.pow(1024,Math.floor(number))).toFixed(precision)+" "+units[number]}}angular.module("app._common").filter("bytes",bytes)}(),function(){"use strict";function pwCheck(){return{require:"ngModel",restrict:"A",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pwCheck;elem.add(firstPassword).on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();ctrl.$setValidity("pwmatch",v)})})}}}angular.module("app._common").directive("pwCheck",pwCheck)}(),function(){"use strict";function pushMenu($window,$document){function link(scope,element,attrs){var _body=angular.element($document[0].body);element.bind("click",function(){$window.innerWidth>screenSizes.sm-1?_body.hasClass("sidebar-collapse")?_body.removeClass("sidebar-collapse"):_body.addClass("sidebar-collapse"):_body.hasClass("sidebar-open")?_body.removeClass("sidebar-open").removeClass("sidebar-collapse"):_body.addClass("sidebar-open")})}var screenSizes={xs:480,sm:768,md:992,lg:1200},directive={restrict:"A",link:link};return directive}angular.module("app._common").directive("pushMenu",pushMenu),pushMenu.$inject=["$window","$document"]}(),function(){"use strict";function ngThumb($window){var helper={support:!(!$window.FileReader||!$window.CanvasRenderingContext2D),isFile:function(item){return angular.isObject(item)&&item instanceof $window.File},isImage:function(file){var type="|"+file.type.slice(file.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(type)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(scope,element,attributes){function onLoadFile(event){var img=new Image;img.onload=onLoadImage,img.src=event.target.result}function onLoadImage(){var width=params.width||this.width/this.height*params.height,height=params.height||this.height/this.width*params.width;canvas.attr({width:width,height:height}),canvas[0].getContext("2d").drawImage(this,0,0,width,height)}if(!helper.support)return void console.log("ngThumb: FileReader not supported");var params=scope.$eval(attributes.ngThumb);if(console.log("ngThumb: params",params),!helper.isFile(params.file))return void console.log("ngThumb: params.file is not a file");if(!helper.isImage(params.file))return void console.log("ngThumb: params.file is not an image");var canvas=element.find("canvas"),reader=new FileReader;reader.onload=onLoadFile,reader.readAsDataURL(params.file)}}}ngThumb.$inject=["$window"],angular.module("app._common").directive("ngThumb",ngThumb)}(),function(){"use strict";function ngPrint(){function link(scope,element,attrs){element.on("click",function(){var elemToPrint=document.getElementById(attrs.printElementId);elemToPrint&&printElement(elemToPrint)});var beforePrint=function(){console.log("Functionality to run before printing.")},afterPrint=function(){console.log("Functionality to run after printing"),printSection.innerHTML=""};if(window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(mql){mql.matches?beforePrint():afterPrint()})}window.onbeforeprint=beforePrint,window.onafterprint=afterPrint}function printElement(elem){var domClone=elem.cloneNode(!0);printSection.appendChild(domClone),window.print()}var printSection=document.getElementById("printSection");return printSection||(printSection=document.createElement("div"),printSection.id="printSection",document.body.appendChild(printSection)),{link:link,restrict:"A"}}angular.module("app._common").directive("ngPrint",ngPrint)}(),function(){"use strict";function errSrc(){return{link:function(scope,element,attrs){attrs.ngSrc||attrs.$set("src",attrs.errSrc),element.bind("error",function(){return"REMOVE"==attrs.errSrc?void element.remove():void(attrs.src!=attrs.errSrc&&attrs.$set("src",attrs.errSrc))})}}}angular.module("app._common").directive("errSrc",errSrc)}(),function(){"use strict";function ngConfirmClick(){return{priority:-1,restrict:"A",link:function(scope,element,attrs){element.bind("click",function(e){var message=attrs.ngConfirmClick;message&&!confirm(message)&&(e.stopImmediatePropagation(),e.preventDefault())})}}}angular.module("app._common").directive("ngConfirmClick",ngConfirmClick)}(),function(){"use strict";function contentWrapper($window,$timeout){function link(scope,wrapper,attrs){fix(wrapper),angular.element($window).bind("resize",function(){fix(wrapper)})}function fix(element){var window_height=window.innerHeight,header_height=35;element.css({height:window_height-header_height+"px"})}var directive={restrict:"C",link:link};return directive}contentWrapper.$inject=["$window","$timeout"],angular.module("app._common").directive("contentWrapper",contentWrapper)}(),function(){"use strict";angular.module("app._common").constant("topmenu",[{name:"States",link:"#",subtree:[{name:"state 1",link:"state1"},{name:"state 2",link:"state2"}]}])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates(),"/")}function getStates(){return[{state:"app",config:{abstract:!0,resolve:{isAuthenticated:function($state,AppUser,$timeout){$timeout(function(){if(!AppUser.isAuthenticated())return $state.go("auth.login"),!1})}},templateUrl:"src/_common/views/layout.html",controller:function(AppUser){var vm=this;AppUser.getCurrent().$promise.then(function(_user){vm.name=_user.fullname.split(" ")[1]})}}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app._common").run(RoutesConfig)}(),function(){"use strict";function LocationConfig(configHelperProvider,$locationProvider){$locationProvider.html5Mode(!0)}LocationConfig.$inject=["configHelperProvider","$locationProvider"],angular.module("app._common").config(LocationConfig)}(),function(){"use strict";function LocationConfig($httpProvider){$httpProvider.defaults.withCredentials=!0,$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"]}LocationConfig.$inject=["$httpProvider"],angular.module("app._common").config(LocationConfig)}(),function(){"use strict";angular.module("app.users",[])}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.users",config:{url:"/users",controller:"UsersOverviewController",templateUrl:"src/users/overview/view.html"}}]}appRun.$inject=["routerHelper"],angular.module("app.users").run(appRun)}(),function(){"use strict";angular.module("app.settings",[])}(),function(){"use strict";function SettingsModals(modalHelper){function getModals(){return[{modal:"ChangePassword",config:{templateUrl:"src/settings/changepassword/view.html",controller:"ChangePasswordController",size:"sm"}},{modal:"UserForm",config:{templateUrl:"src/settings/user.form/view.html",controller:"UserFormController",size:"sm"}}]}return modalHelper.configureModals(getModals())}angular.module("app.settings").factory("SettingsModals",SettingsModals),SettingsModals.$inject=["modalHelper"]}(),function(){"use strict";function AppUsersOverviewController(AppUser,SettingsModals){function activate(){_loadAppUsers()}function _loadAppUsers(){return vm.loading=!0,AppUser.find().$promise.then(function(users){vm.AppUsers=users}).finally(function(){vm.loading=!1})}function UserForm(AppUserID){SettingsModals.UserForm({AppUserID:AppUserID}).then(function(){_loadAppUsers()})}var vm=this;vm.UserForm=UserForm,activate()}AppUsersOverviewController.$inject=["AppUser","SettingsModals"],angular.module("app.appusers").controller("AppUsersOverviewController",AppUsersOverviewController)}(),function(){"use strict";function UserFormController($uibModalInstance,ModalParams,AppUser){function activate(){ModalParams.AppUserID&&AppUser.findById({id:ModalParams.AppUserID}).$promise.then(function(appuser){vm.AppUser=appuser}).finally(function(){vm.loading=!1})}function Save(){vm.loading=!0,AppUser.upsert(vm.AppUser).$promise.then(function(user){$uibModalInstance.close()}).finally(function(){vm.loading=!1})}var vm=this;vm.Save=Save,activate()}UserFormController.$inject=["$uibModalInstance","ModalParams","AppUser"],angular.module("app.settings").controller("UserFormController",UserFormController)}(),function(){"use strict";function UserFormController($uibModalInstance,ModalParams,AppUser){function activate(){ModalParams.AppUserID&&AppUser.findById({id:ModalParams.AppUserID}).$promise.then(function(appuser){vm.AppUser=appuser}).finally(function(){vm.loading=!1})}function Save(){vm.loading=!0,AppUser.upsert(vm.AppUser).$promise.then(function(user){$uibModalInstance.close()}).finally(function(){vm.loading=!1})}var vm=this;vm.Save=Save,activate()}UserFormController.$inject=["$uibModalInstance","ModalParams","AppUser"],angular.module("app.settings").controller("UserFormController",UserFormController)}(),function(){"use strict";function ChangePasswordController($uibModalInstance,ModalParams,AppUser,toaster){function activate(){}function Save(){vm.loading=!0,AppUser.prototype$updateAttributes({id:AppUser.getCurrentId(),password:vm.Password}).$promise.then(function(user){toaster.pop("success","Password Changed"),vm.loading=!1,$uibModalInstance.close()})}var vm=this;vm.Save=Save,activate()}ChangePasswordController.$inject=["$uibModalInstance","ModalParams","AppUser","toaster"],angular.module("app.settings").controller("ChangePasswordController",ChangePasswordController)}(),function(){"use strict";angular.module("app.static",[])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.static",config:{abstract:!0,url:"/stat",template:"<ui-view/>"}},{state:"app.static.help",config:{title:"Help",url:"/help",templateUrl:"src/static/pages/help.html"}},{state:"app.static.terms",config:{title:"Terms of Use",url:"/terms",templateUrl:"src/static/pages/terms.html"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.static").run(RoutesConfig)}(),function(){"use strict";function SettingsService($resource){function GetSettings(params){return $resource(APP.Service+"_design/models/_view/Settings").get().$promise.then(function(data){return _.chain(data.rows).map(function(item){return item.value}).sortBy(function(item){return item.DrewAt||0}).reverse().value()})}function GetSetting(id){return $resource(APP.Service+id).get().$promise.then(function(data){return data})}function SaveSetting(Setting){return Setting.Type="Setting",$resource(APP.Service).save(Setting).$promise.then(function(data){return data})}function DeleteSetting(Setting){return Setting._deleted=!0,Setting.DeletedAt=new Date,$resource(APP.Service).save(Setting).$promise}var service={GetSettings:GetSettings,GetSetting:GetSetting,SaveSetting:SaveSetting,DeleteSetting:DeleteSetting};return service}SettingsService.$inject=["$resource"],angular.module("app.settings").factory("SettingsService",SettingsService)}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.settings",config:{abstract:!0,url:"/settings",controller:"SettingsController",templateUrl:"src/settings/_common/layout.html"}},{state:"app.settings.general",config:{url:"/general",controller:"SettingsGeneralController",templateUrl:"src/settings/general/view.html"}},{state:"app.settings.users",config:{url:"/users",controller:"SettingsAppUsersController",templateUrl:"src/settings/users/view.html"}},{state:"app.settings.profile",config:{url:"/profile",controller:"SettingsProfileController",templateUrl:"src/settings/profile/view.html"}},{state:"app.settings.help",config:{url:"/help",controller:"SettingsHelpController",templateUrl:"src/settings/help/view.html"}},{state:"app.settings.terms",config:{url:"/terms",controller:"SettingsTermsController",templateUrl:"src/settings/terms/view.html"}}]}appRun.$inject=["routerHelper"],angular.module("app.settings").run(appRun)}(),function(){"use strict";function SettingsModals(modalHelper){function getModals(){return[{modal:"ChangePassword",config:{templateUrl:"src/settings/changepassword/view.html",controller:"ChangePasswordController",size:"sm"}},{modal:"UserForm",config:{templateUrl:"src/settings/user.form/view.html",controller:"UserFormController",size:"sm"}}]}return modalHelper.configureModals(getModals())}angular.module("app.settings").factory("SettingsModals",SettingsModals),SettingsModals.$inject=["modalHelper"]}(),function(){"use strict";function SettingsGeneralController(){function activate(){}activate()}angular.module("app.settings").controller("SettingsGeneralController",SettingsGeneralController)}(),function(){"use strict";angular.module("app.invoices",[])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.invoices",config:{abstract:!0,url:"/invoices",template:"<ui-view/>"}},{state:"app.invoices.overview",config:{title:"Invoices Dashboard",url:"/",templateUrl:"src/invoices/overview/view.html",controller:"InvoicesOverviewController"}},{state:"app.invoices.invoice",config:{title:"Invoice Preview",url:"/",templateUrl:"src/invoices/invoice/view.html",controller:"InvoicesInvoiceController"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.invoices").run(RoutesConfig)}(),function(){"use strict";function InvoicesOverviewController(Invoice){function activate(){Invoice.find({filter:{limit:10,order:"date DESC"}}).$promise.then(function(_invoices){vm.invoices=_invoices}).finally(function(){})}var vm=this;activate()}InvoicesOverviewController.$inject=["Invoice"],angular.module("app.invoices").controller("InvoicesOverviewController",InvoicesOverviewController)}(),function(){"use strict";function InvoicesInvoiceController(){function activate(){vm.news=_.sortBy([{date:"2015-01-01",content:"Tempor ut qui non mollit qui.",title:"ea enim veniam laboris ullamco",url:"http://google.com"},{date:"2015-01-01",content:"Officia id nulla nulla id ipsum minim.",title:"cillum aute deserunt labore est",url:"http://google.com"},{date:"2015-01-01",content:"Ullamco ut voluptate aliqua laboris nostrud.",title:"velit occaecat adipisicing tempor sit",url:"http://google.com"},{date:"2015-01-01",content:"Ipsum nisi non adipisicing ex aute veniam.",title:"non do ipsum et cillum",url:"http://google.com"}],"date")}var vm=this;activate()}angular.module("app.invoices").controller("InvoicesInvoiceController",InvoicesInvoiceController)}(),function(){"use strict";angular.module("app.files",[])}(),function(){"use strict";function FilesModals(modalHelper){function getModals(){return[{modal:"AddFiles",config:{templateUrl:"src/files/add/view.html",controller:"FilesAddController",size:"md"}}]}return modalHelper.configureModals(getModals())}angular.module("app.files").factory("FilesModals",FilesModals),FilesModals.$inject=["modalHelper"]}(),function(){"use strict";function FilesAddController($uibModalInstance,ModalParams,FileUploader){function activate(){}function Upload(){}var vm=this;vm.Label=ModalParams.Label,vm.Container=ModalParams.Container,vm.Upload=Upload,activate();var uploader=vm.uploader=new FileUploader({vm:vm,url:"/api/containers/"+vm.Container+"/upload"});uploader.onErrorItem=function(item,response,status,headers){item.error=response.error}}FilesAddController.$inject=["$uibModalInstance","ModalParams","FileUploader"],angular.module("app.files").controller("FilesAddController",FilesAddController)}(),function(){"use strict";function ContactsTopMenuController($state,ContactsModals){function activate(){}function AddCompany(){ContactsModals.AddCompany().then(function(response){$state.go("app.contacts.company",{id:response.id})})}function AddPerson(){ContactsModals.AddPerson().then(function(response){$state.go("app.contacts.person",{id:response.id})})}function AddEvent(){ContactsModals.AddEvent().then(function(response){$state.go("app.contacts.events.event",{id:response.id})})}function ExportImport(){ContactsModals.ExportImport().then(function(){})}var vm=this;vm.AddCompany=AddCompany,vm.AddPerson=AddPerson,vm.AddEvent=AddEvent,vm.ExportImport=ExportImport,activate()}ContactsTopMenuController.$inject=["$state","ContactsModals"],angular.module("app.contacts").controller("ContactsTopMenuController",ContactsTopMenuController)}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.contacts",config:{abstract:!0,url:"/contacts",template:"<ui-view/>"}},{state:"app.contacts.overview",config:{title:"Contacts Overview",url:"/",templateUrl:"src/contacts/overview/view.html",controller:"ContactsOverviewController"}},{state:"app.contacts.person",config:{title:"Person",url:"/person/:id",templateUrl:"src/contacts/person/view.html",controller:"ContactsPersonController"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.contacts").run(RoutesConfig)}(),function(){"use strict";function ContactsModals(modalHelper){function getModals(){return[{modal:"AddPerson",config:{templateUrl:"src/contacts/person.add/view.html",controller:"ContactsAddPersonController",size:"sm"}},{modal:"AddCompany",config:{templateUrl:"src/contacts/company.add/view.html",controller:"ContactsAddCompanyController",size:"sm"}},{modal:"AddEvent",config:{templateUrl:"src/contacts/event.add/view.html",controller:"ContactsAddEventController"}},{modal:"ExportImport",config:{templateUrl:"src/contacts/exportimport/view.html",controller:"ContactsExportImportController"}}]}return modalHelper.configureModals(getModals())}angular.module("app.contacts").factory("ContactsModals",ContactsModals),ContactsModals.$inject=["modalHelper"]}(),function(){"use strict";function ContactsAddPersonController($uibModalInstance,ModalParams,Company){function activate(){loadCompanies()}function loadCompanies(){vm.Companies=Company.find({filter:{order:"name ASC"}})}function Save(){}var vm=this;vm.Save=Save,activate()}ContactsAddPersonController.$inject=["$uibModalInstance","ModalParams","Company"],angular.module("app.contacts").controller("ContactsAddPersonController",ContactsAddPersonController)}(),function(){"use strict";function ContactsOverviewController($state,Company,ContactsModals){function activate(){_getAccessed()}function _getAccessed(){vm.loading=!0,Company.find({filter:{limit:10,order:"lastAccess DESC"}}).$promise.then(function(_companies){vm.Companies=_companies}).finally(function(){vm.loading=!1})}function AddCompany(){ContactsModals.AddCompany().then(function(response){$state.go("app.contacts.company",{id:response.id})})}var vm=this;vm.AddCompany=AddCompany,activate()}ContactsOverviewController.$inject=["$state","Company","ContactsModals"],angular.module("app.contacts").controller("ContactsOverviewController",ContactsOverviewController)}(),function(){"use strict";function ContactsAddCompanyController($uibModalInstance,Company){function activate(){loadCompanies()}function loadCompanies(){vm.Companies=Company.find({filter:{order:"name ASC"}})}function Save(){Company.create(vm.Company).$promise.then(function(_company){$uibModalInstance.close(_company)})}var vm=this;vm.Save=Save,activate()}ContactsAddCompanyController.$inject=["$uibModalInstance","Company"],angular.module("app.contacts").controller("ContactsAddCompanyController",ContactsAddCompanyController)}(),function(){"use strict";angular.module("app.config",[])}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.config",config:{url:"/config",controller:"ConfigController",templateUrl:"src/config/_common/layout.html"}}]}appRun.$inject=["routerHelper"],
angular.module("app.config").run(appRun)}(),function(){"use strict";angular.module("app.auth",[])}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"auth",config:{abstract:!0,template:"<ui-view/>"}},{state:"auth.login",config:{url:"/login",params:{ref:null},templateUrl:"src/auth/login/view.html",controller:"AuthLoginController"}},{state:"auth.logout",config:{url:"/logout",template:"<ui-view/>",controller:function(AppUser,$state){AppUser.logout().$promise.then(function(){}).finally(function(){localStorage.clear(),$state.go("auth.login",{ref:"SIGNOUT"})})}}}]}angular.module("app.auth").run(appRun),appRun.$inject=["routerHelper"]}(),function(){"use strict";function AuthInterceptor($q,$injector,$cookies){return{responseError:function(rejection){if(console.log("rejection",rejection),401===rejection.status&&"/api/AppUsers/login"!=rejection.config.url){localStorage.clear();var $state=$injector.get("$state");$state.go("auth.login",{ref:"SESSIONEND"})}return $q.reject(rejection)}}}function AuthInterceptorConfig($httpProvider){$httpProvider.interceptors.push("AuthInterceptor")}AuthInterceptor.$inject=["$q","$injector","$cookies"],AuthInterceptorConfig.$inject=["$httpProvider"],angular.module("app.auth").config(AuthInterceptorConfig).factory("AuthInterceptor",AuthInterceptor)}(),function(){"use strict";angular.module("app.auth").constant("LoginMessages",{SESSIONEND:{Type:"danger",Message:"You were signed out",Details:"Probably your session was timed out"},SIGNOUT:{Type:"success",Message:"You were signed out",Details:"You may login again using the form"},REGISTERED:{Type:"success",Message:"Your account is ready, you can login now",Details:!1},AUTHERROR:{Type:"danger",Message:"Authentication Error",Details:null},UNAVAILABLE:{Type:"danger",Message:"Service is not available",Details:"Please try again later. If the problem insist, contact your system administrator"},LOGIN_FAILED:{Type:"danger",Message:"Name or password is incorrect",Details:"Please try again"}})}(),function(){"use strict";function AuthLoginController($stateParams,$state,LoginMessages,AppUser){function activate(){$stateParams.ref&&_signMessage($stateParams.ref.toUpperCase())}function SignIn(){vm.loading=!0,vm.Alert=!1,AppUser.login(angular.copy(vm.credentials)).$promise.then(function(response){$state.go("app.dashboard")},function(rejection){vm.credentials.password=null,vm.loading=!1,_signMessage(rejection.data.error.code.toUpperCase())})}function _signMessage(code){vm.Alert=LoginMessages[code]}var vm=this;vm.loading=!1,vm.SignIn=SignIn,activate()}AuthLoginController.$inject=["$stateParams","$state","LoginMessages","AppUser"],angular.module("app.auth").controller("AuthLoginController",AuthLoginController)}(),function(){"use strict";angular.module("app.register",[])}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"register",config:{url:"/register",templateUrl:"src/register/view.html",controller:"RegisterController"}}]}angular.module("app.register").run(appRun),appRun.$inject=["routerHelper"]}(),function(){"use strict";function RegisterController(){function activate(){}activate()}angular.module("app.register").controller("RegisterController",RegisterController)}(),function(){"use strict";angular.module("app.dashboard",[])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.dashboard",config:{title:"Dashboard",url:"/",templateUrl:"src/dashboard/view.html",controller:"DashboardController"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.dashboard").run(RoutesConfig)}(),function(){"use strict";function DashboardController(){function activate(){vm.news=_.sortBy([{date:"2015-01-01",content:"Tempor ut qui non mollit qui.",title:"ea enim veniam laboris ullamco",url:"http://google.com"},{date:"2015-01-01",content:"Officia id nulla nulla id ipsum minim.",title:"cillum aute deserunt labore est",url:"http://google.com"},{date:"2015-01-01",content:"Ullamco ut voluptate aliqua laboris nostrud.",title:"velit occaecat adipisicing tempor sit",url:"http://google.com"},{date:"2015-01-01",content:"Ipsum nisi non adipisicing ex aute veniam.",title:"non do ipsum et cillum",url:"http://google.com"}],"date")}var vm=this;activate()}angular.module("app.dashboard").controller("DashboardController",DashboardController)}(),function(){"use strict";angular.module("app",["ngResource","ngSanitize","ngCookies","ui.bootstrap","ui.router","ui.router.tabs","ui.navbar","angularFileUpload","lbServices","app.register","app.users","app.auth","app.contacts","app.dashboard","app.files","app.settings","app.static","app.invoices","app.config","app._common"])}(),function(){"use strict";function appRun($rootScope,$state,$stateParams){$rootScope.$on("$stateChangeStart",function(evt,to,params){$rootScope.title=toState.title,to.redirectTo&&(evt.preventDefault(),$state.go(to.redirectTo,params))})}appRun.$inject=["$rootScope","$state","$stateParams"],angular.module("app").run(appRun)}();
//# sourceMappingURL=app.min.js.map
