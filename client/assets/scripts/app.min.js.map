{"version":3,"sources":["contacts/module.js","contacts/company/_common/routes.js","app.min.js","contacts/company/_common/modals.js","contacts/company/_common/controller.js","contacts/company/_common/constants.js","contacts/company/transactions/controller.js","contacts/company/transactions/constants.js","contacts/company/persons/controller.js","contacts/company/overview/controller.js","contacts/company/map/controller.js","contacts/company/files/controller.js","contacts/company/events/controller.js","contacts/company/editlogo/controller.js","_common/_module.js","_common/helpers/route.helper.js","_common/helpers/modal.helper.js","_common/helpers/config.helper.js","_common/filters/numberfixedlen.js","_common/filters/join.js","_common/filters/fromnow.js","_common/filters/fileicon.js","_common/filters/bytes.js","_common/directives/pwcheck.js","_common/directives/ngthumb.js","_common/directives/ngprint.js","_common/directives/errsrc.js","_common/directives/confirm.js","_common/constants/topmenu.js","app.js","_common/configs/rootscope.js","_common/configs/location.config.js","_common/configs/http.config.js","settings/module.js","settings/_common/service.js","settings/_common/routes.js","settings/_common/modals.js","settings/overview/controller.js","settings/general/controller.js","settings/changepassword/controller.js","files/module.js","files/_common/modals.js","files/add/controller.js","contacts/_common/routes.js","contacts/_common/modals.js","contacts/topmenu/controller.js","contacts/overview/controller.js","contacts/contact/controller.js","contacts/addperson/controller.js","contacts/addcompany/controller.js","auth/_module.js","auth/login/controller.js","_common/routes.js","static/_module.js","static/routes.js","dashboard/_module.js","dashboard/routes.js","dashboard/controller.js","auth/routes.js","auth/interceptor.js","auth/constants.js","run.js","config.js"],"names":["angular","module","RoutesConfig","configHelper","routerHelper","configureStates","getStates","state","config","abstract","url","template","controller","title","templateUrl","$inject","run","CompanyModals","modalHelper","getModals","modal","size","configureModals","factory","ContactsCompanyController","$stateParams","Company","CompanyTabs","activate","vm","findById","id","EditLogo","this","Tabs","Print","docDefinition","content","pdfMake","createPdf","open","constant","heading","icon","route","class","ContactsCompanyTransactionsController","Transaction","DataFilters","ChartGroups","LoadTransactions","loading","find","filter","$promise","then","data","_total","_","each","transaction","amount","total","Transactions","ReloadChart","console","log","chart","params","group","labels","grouped_transactions","groupBy","moment","date","format","value","transactions","keydate","_date_total","reduce","Math","round","push","where","companyId","order","options","bezierCurve","datasetFill","one_month","alias","label","three_months","all","daily","weekly","monthly","ContactsCompanyPersonsController","Person","_loadPersons","Persons","ContactsCompanyOverviewController","_loadCompany","include","ContactsCompanyMapController","$timeout","center","markers","company","lat","parseFloat","location","lng","lon","zoom","message","name","street","opacity","focus","ContactsCompanyFilesController","Container","FilesModals","_loadFiles","UploadFiles","AddFiles","Label","container","getFiles","Files","ContactsCompanyEventsController","Event","_loadEvents","reload","gt","_ranges","range","from","lt","to","Events","WEEK","subtract","add","HALFMONTH","MONTH","ContactsCompanyEditLogoController","$uibModalInstance","ModalParams","FileUploader","Save","Uploader","uploadItem","onCompleteItem","item","response","status","headers","logo","file","upsert","onAfterAddingFile","routerHelperProvider","$locationProvider","$stateProvider","$urlRouterProvider","RouterHelper","$state","states","otherwisePath","forEach","controllerAs","extend","views","hasOtherwise","otherwise","get","service","$get","provider","modalHelperProvider","$uibModal","$q","modals","_ret","obj","ModalResultComplete","ModalResultFailed","reason","reject","resolve","result","configHelperProvider","ConfigHelper","notifyConfig","configName","numberFixedLen","a","b","slice","join","array","separator","fromNow","fileicon","_icons","application/pdf","application/powerpoint","application/x-msword","application/x-msexcel","application/x-mspowerpoint","audio/x-mpeg-3","image/gif","image/png","image/tiff","image/jpeg","video/avi","video/mpeg","video/msvideo","video/quicktime","application/zip","bytes","precision","isNaN","isFinite","units","number","floor","pow","toFixed","pwCheck","require","restrict","link","scope","elem","attrs","ctrl","firstPassword","on","$apply","v","val","$","$setValidity","directive","ngThumb","$window","helper","support","FileReader","CanvasRenderingContext2D","isFile","isObject","File","isImage","type","lastIndexOf","indexOf","element","attributes","onLoadFile","event","img","Image","onload","onLoadImage","src","target","width","height","canvas","attr","getContext","drawImage","$eval","reader","readAsDataURL","ngPrint","elemToPrint","document","getElementById","printElementId","printElement","beforePrint","afterPrint","printSection","innerHTML","window","matchMedia","mediaQueryList","addListener","mql","matches","onbeforeprint","onafterprint","domClone","cloneNode","appendChild","print","createElement","body","errSrc","ngSrc","$set","bind","remove","ngConfirmClick","priority","e","confirm","stopImmediatePropagation","preventDefault","subtree","appRun","$rootScope","APP","$on","toState","description","LocationConfig","html5Mode","$httpProvider","defaults","withCredentials","useXDomain","common","SettingsService","$resource","GetSettings","Service","chain","rows","map","sortBy","DrewAt","reverse","GetSetting","SaveSetting","Setting","Type","save","DeleteSetting","_deleted","DeletedAt","Date","SettingsModals","SettingsController","ChangePassword","go","ref","SettingsGeneralController","ChangePasswordController","User","toaster","prototype$updateAttributes","getCurrentId","password","Password","user","pop","close","FilesAddController","Upload","uploader","onErrorItem","error","ContactsModals","ContactsTopMenuController","AddCompany","AddPerson","AddEvent","ExportImport","ContactsOverviewController","_getAccessed","loading_accessed","limit","_companies","accessed","ContactsContactController","ContactsAddPersonController","loadCompanies","Companies","ContactsAddCompanyController","create","_company","AuthLoginController","LoginMessages","_signMessage","toUpperCase","SignIn","Alert","login","copy","credentials","rejection","code","isAuthenticated","","getCurrent","_user","username","menu-contacts@app","libs","href","DashboardController","news","logout","localStorage","clear","AuthInterceptor","$injector","$cookies","responseError","AuthInterceptorConfig","interceptors","SESSIONEND","Message","Details","SIGNOUT","REGISTERED","AUTHERROR","UNAVAILABLE","LOGIN_FAILED","evt","redirectTo","version","repository","author","email","client"],"mappings":"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","file":"app.min.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts', [\r\n      'leaflet-directive',\r\n      'chart.js',\r\n    ]);\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .run(RoutesConfig);\r\n\r\n  /* @ngInject */\r\n  function RoutesConfig(configHelper, routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.contacts.company',\r\n      config: {\r\n        abstract: true,\r\n        url: \"/company/:id\",\r\n        template:\"<ui-view/>\",\r\n        controller: 'ContactsCompanyController',\r\n      }\r\n    }, {\r\n      state: \"app.contacts.company.map\",\r\n      config: {\r\n        title: \"map\",\r\n        url: \"/map\",\r\n        templateUrl: 'src/contacts/company/map/view.html',\r\n        controller: 'ContactsCompanyMapController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile\",\r\n      config: {\r\n        abstract: true,\r\n        templateUrl: 'src/contacts/company/_common/_profile.html',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.overview\",\r\n      config: {\r\n        title: \"overview\",\r\n        url: \"/overview\",\r\n        templateUrl: 'src/contacts/company/overview/view.html',\r\n        controller: 'ContactsCompanyOverviewController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.persons\",\r\n      config: {\r\n        title: \"persons\",\r\n        url: \"/persons\",\r\n        templateUrl: 'src/contacts/company/persons/view.html',\r\n        controller: 'ContactsCompanyPersonsController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.events\",\r\n      config: {\r\n        title: \"events\",\r\n        url: \"/events\",\r\n        templateUrl: 'src/contacts/company/events/view.html',\r\n        controller: 'ContactsCompanyEventsController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.transactions\",\r\n      config: {\r\n        title: \"transactions\",\r\n        url: \"/transactions\",\r\n        templateUrl: 'src/contacts/company/transactions/view.html',\r\n        controller: 'ContactsCompanyTransactionsController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.files\",\r\n      config: {\r\n        title: \"files\",\r\n        url: \"/files\",\r\n        templateUrl: 'src/contacts/company/files/view.html',\r\n        controller: 'ContactsCompanyFilesController',\r\n      },\r\n    }];\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts', [\r\n      'leaflet-directive',\r\n      'chart.js',\r\n    ]);\r\n})();\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  RoutesConfig.$inject = [\"configHelper\", \"routerHelper\"];\r\n  angular\r\n    .module('app.contacts')\r\n    .run(RoutesConfig);\r\n\r\n  /* @ngInject */\r\n  function RoutesConfig(configHelper, routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.contacts.company',\r\n      config: {\r\n        abstract: true,\r\n        url: \"/company/:id\",\r\n        template:\"<ui-view/>\",\r\n        controller: 'ContactsCompanyController',\r\n      }\r\n    }, {\r\n      state: \"app.contacts.company.map\",\r\n      config: {\r\n        title: \"map\",\r\n        url: \"/map\",\r\n        templateUrl: 'src/contacts/company/map/view.html',\r\n        controller: 'ContactsCompanyMapController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile\",\r\n      config: {\r\n        abstract: true,\r\n        templateUrl: 'src/contacts/company/_common/_profile.html',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.overview\",\r\n      config: {\r\n        title: \"overview\",\r\n        url: \"/overview\",\r\n        templateUrl: 'src/contacts/company/overview/view.html',\r\n        controller: 'ContactsCompanyOverviewController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.persons\",\r\n      config: {\r\n        title: \"persons\",\r\n        url: \"/persons\",\r\n        templateUrl: 'src/contacts/company/persons/view.html',\r\n        controller: 'ContactsCompanyPersonsController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.events\",\r\n      config: {\r\n        title: \"events\",\r\n        url: \"/events\",\r\n        templateUrl: 'src/contacts/company/events/view.html',\r\n        controller: 'ContactsCompanyEventsController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.transactions\",\r\n      config: {\r\n        title: \"transactions\",\r\n        url: \"/transactions\",\r\n        templateUrl: 'src/contacts/company/transactions/view.html',\r\n        controller: 'ContactsCompanyTransactionsController',\r\n      },\r\n    }, {\r\n      state: \"app.contacts.company.profile.files\",\r\n      config: {\r\n        title: \"files\",\r\n        url: \"/files\",\r\n        templateUrl: 'src/contacts/company/files/view.html',\r\n        controller: 'ContactsCompanyFilesController',\r\n      },\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .factory('CompanyModals', CompanyModals);\r\n\r\n  CompanyModals.$inject = ['modalHelper'];\r\n\r\n  function CompanyModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"EditLogo\",\r\n        config: {\r\n          templateUrl: 'src/contacts/company/editlogo/view.html',\r\n          controller: \"ContactsCompanyEditLogoController\",\r\n          size:\"md\",\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  ContactsCompanyController.$inject = [\"$stateParams\", \"Company\", \"CompanyTabs\", \"CompanyModals\"];\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyController\", ContactsCompanyController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyController($stateParams, Company, CompanyTabs, CompanyModals) {\r\n    var vm = this;\r\n\r\n    vm.Tabs = CompanyTabs;\r\n\r\n    vm.EditLogo = EditLogo;\r\n\r\n    vm.Print = function() {\r\n      var docDefinition = {\r\n        content: 'ελλάδα Ά an sample PDF printed with pdfMakeThis is an sample PDF printed with pdfMakeThis is an sample PDF printed with pdfMake'\r\n      };\r\n      // or become pretty complex (having multi-level tables, images, lists, paragraphs, margins, styles etc...).\r\n      //\r\n      // As soon as you have the document-definition-object, you're ready to create and open/print/download the PDF:\r\n\r\n      // open the PDF in a new window\r\n      pdfMake.createPdf(docDefinition).open();\r\n\r\n      // print the PDF (temporarily Chrome-only)\r\n      // pdfMake.createPdf(docDefinition).print();\r\n\r\n      // download the PDF (temporarily Chrome-only)\r\n      // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n    }\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.Company = Company.findById({\r\n        id: $stateParams.id,\r\n      });\r\n    }\r\n\r\n    function EditLogo() {\r\n      \r\n      CompanyModals\r\n        .EditLogo({\r\n          Company: vm.Company\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n;(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .constant(\"CompanyTabs\", [{\n      heading: {\n        icon: \"bars\",\n        title: 'Overview'\n      },\n      route: 'app.contacts.company.profile.overview',\n    }, {\n      heading: {\n        icon: \"calendar\",\n        class: \"hidden-xs\",\n        title: 'Events'\n      },\n      route: 'app.contacts.company.profile.events',\n    }, {\n      heading: {\n        icon: \"money\",\n        class: \"hidden-xs\",\n        title: 'Transactions'\n      },\n      route: 'app.contacts.company.profile.transactions',\n    }, {\n      heading: {\n        icon: \"files-o\",\n        class: \"hidden-xs\",\n        title: 'Files'\n      },\n      route: 'app.contacts.company.profile.files',\n    }]);\n\n\n}());\n;(function() {\r\n  'use strict';\r\n\r\n  ContactsCompanyTransactionsController.$inject = [\"$stateParams\", \"Transaction\", \"DataFilters\", \"ChartGroups\"];\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyTransactionsController\", ContactsCompanyTransactionsController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyTransactionsController(\r\n    $stateParams,\r\n    Transaction,\r\n    DataFilters,\r\n    ChartGroups) {\r\n\r\n    var vm = this;\r\n\r\n    vm.filter = {\r\n      where: {\r\n        companyId: $stateParams.id,\r\n      },\r\n      order: \"date ASC\",\r\n    }\r\n\r\n    vm.chart = {\r\n      labels: [],\r\n      data: [\r\n        []\r\n      ],\r\n      params: {\r\n        group: \"weekly\",\r\n      },\r\n      options: {\r\n        bezierCurve: false,\r\n        datasetFill: false,\r\n      }\r\n    };\r\n\r\n    vm.params = {\r\n      filter: \"one_month\",\r\n    }\r\n\r\n    vm.DataFilters = DataFilters;\r\n    vm.ChartGroups = ChartGroups;\r\n\r\n    vm.LoadTransactions = LoadTransactions;\r\n    vm.ReloadChart = ReloadChart;\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadTransactions();\r\n    }\r\n\r\n    function LoadTransactions() {\r\n      vm.loading = true;\r\n\r\n      return Transaction\r\n        .find({\r\n          filter: vm.filter\r\n        })\r\n        .$promise\r\n        .then(function(data) {\r\n          var _total = 0;\r\n          _.each(data, function(transaction) {\r\n            _total += transaction.amount;\r\n            transaction.total = _total;\r\n          });\r\n          vm.Transactions = data;\r\n          vm.ReloadChart();\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function ReloadChart() {\r\n      console.log(vm.chart.params.group);\r\n      vm.chart.labels = [];\r\n      vm.chart.data[0] = [];\r\n      var grouped_transactions = _.groupBy(vm.Transactions, function(transaction) {\r\n        return moment(transaction.date).format(ChartGroups[vm.chart.params.group].value);\r\n      });\r\n\r\n      _.each(grouped_transactions, function(transactions, keydate) {\r\n        var _date_total = _.reduce(transactions, function(total, transaction) {\r\n          return Math.round(transaction.amount + total);\r\n        }, 0);\r\n        vm.chart.labels.push(keydate);\r\n        vm.chart.data[0].push(_date_total);\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .constant(\"DataFilters\", {\r\n      one_month: {\r\n        alias: \"one_month\",\r\n        label: \"+-1 Month\",\r\n        value: {\r\n          // date\r\n        },\r\n      },\r\n      three_months: {\r\n        alias: \"three_months\",\r\n        label: \"+-3 Months\",\r\n        value: {\r\n          // date\r\n        },\r\n      },\r\n      all: {\r\n        alias: \"all\",\r\n        label: \"All Transactions\",\r\n        value: false,\r\n      }\r\n    })\r\n    .constant(\"ChartGroups\", {\r\n      daily: {\r\n        alias: \"daily\",\r\n        label: \"Daily\",\r\n        value: \"DD/MM/YYYY\",\r\n      },\r\n      weekly: {\r\n        alias: \"weekly\",\r\n        label: \"Weekly\",\r\n        value: \"[W]ww MM/YYYY\",\r\n      },\r\n      monthly: {\r\n        alias: \"monthly\",\r\n        label: \"Monthly\",\r\n        value: \"MM/YYYY\",\r\n      }\r\n    })\r\n\r\n})();\r\n;(function() {\n  'use strict';\n\r\n  ContactsCompanyPersonsController.$inject = [\"$stateParams\", \"Person\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyPersonsController\", ContactsCompanyPersonsController);\n\n  /* @ngInject */\n  function ContactsCompanyPersonsController($stateParams,Person) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      _loadPersons();\n    }\n\n    function _loadPersons() {\n      vm.loading = true;\n      return Person\n        .find({\n          filter: {\n            where: {\n              companyId: $stateParams.id,\n            },\n            order: \"fullname ASC\",\n          }\n        })\n        .$promise\n        .then(function(data) {\n          vm.Persons = data;\n        })\n        .finally(function() {\n          vm.loading = false;\n        });\n    }\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsCompanyOverviewController.$inject = [\"$stateParams\", \"Company\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyOverviewController\", ContactsCompanyOverviewController);\n\n  /* @ngInject */\n  function ContactsCompanyOverviewController($stateParams,Company) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      _loadCompany();\n    }\n\n    function _loadCompany() {\n      vm.loading = true;\n      return Company\n        .findById({\n          id: $stateParams.id,\n          filter: {\n            include: [\"persons\"],\n          }\n        })\n        .$promise\n        .then(function(data) {\n          vm.Company = data;\n        })\n        .finally(function() {\n          vm.loading = false;\n        });\n    }\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsCompanyMapController.$inject = [\"$stateParams\", \"Company\", \"$timeout\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyMapController\", ContactsCompanyMapController);\n\n  /* @ngInject */\n  function ContactsCompanyMapController($stateParams, Company, $timeout) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n\n      vm.loading = true;\n\n      vm.center = {};\n      vm.markers = {};\n\n      Company.findById({\n          id: $stateParams.id,\n        })\n        .$promise\n        .then(function(company) {\n          vm.Company = company;\n\n          $timeout(function() {\n\n            vm.center = {\n              lat: parseFloat(company.location.lat),\n              lng: parseFloat(company.location.lon),\n              zoom: 14,\n            };\n            vm.markers = {\n              company: {\n                message: company.name + \"<br/><small>\" + vm.Company.location.street + \"</small>\",\n                lat: parseFloat(company.location.lat),\n                lng: parseFloat(company.location.lon),\n                opacity: 0.8,\n                focus: true,\n              }\n            };\n\n            vm.loading = false;\n\n          }, 1000);\n\n        });\n    }\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsCompanyFilesController.$inject = [\"$stateParams\", \"Container\", \"FilesModals\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyFilesController\", ContactsCompanyFilesController);\n\n  /* @ngInject */\n  function ContactsCompanyFilesController($stateParams, Container, FilesModals) {\n    var vm = this;\n\n    vm.container = $stateParams.id;\n    vm.UploadFiles = UploadFiles;\n    // vm.Download = Download;\n\n    activate();\n\n    function activate() {\n      _loadFiles();\n    }\n\n    function UploadFiles() {\n      FilesModals\n        .AddFiles({\n          Label: \"Company\",\n          Container: vm.container\n        })\n        .then(function() {\n          _loadFiles();\n        });\n    }\n\n    //\n    // function Download(file) {\n    //   Container\n    //     .download({\n    //       container: vm.container,\n    //       file: file,\n    //     })\n    //     .$promise\n    //     .then(function(data) {\n    //       console.log(data);\n    //     });\n    // }\n\n    function _loadFiles() {\n      vm.loading = true;\n      return Container\n        .getFiles({\n          container: vm.container,\n        })\n        .$promise\n        .then(function(data) {\n          vm.Files = data;\n        })\n        .finally(function() {\n          vm.loading = false;\n        });\n    }\n\n\n  }\n\n}());\n;(function() {\r\n  'use strict';\r\n\r\n  ContactsCompanyEventsController.$inject = [\"$stateParams\", \"Event\"];\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyEventsController\", ContactsCompanyEventsController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyEventsController($stateParams, Event) {\r\n    var vm = this;\r\n\r\n    vm.reload = reload;\r\n\r\n    vm.params = {\r\n      range: \"WEEK\",\r\n    };\r\n\r\n    var _ranges = {\r\n      \"WEEK\": {\r\n        from: moment().subtract(7, \"days\"),\r\n        to: moment().add(7, \"days\"),\r\n      },\r\n      \"HALFMONTH\": {\r\n        from: moment().subtract(15, \"days\"),\r\n        to: moment().add(15, \"days\"),\r\n      },\r\n      \"MONTH\": {\r\n        from: moment().subtract(1, \"month\"),\r\n        to: moment().add(1, \"month\"),\r\n      }\r\n    };\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      _loadEvents();\r\n    }\r\n\r\n    function reload() {\r\n      activate();\r\n    }\r\n\r\n    function _loadEvents() {\r\n      vm.loading = true;\r\n      return Event\r\n        .find({\r\n          filter: {\r\n            where: {\r\n              date: {\r\n                gt: _ranges[vm.params.range].from,\r\n                lt: _ranges[vm.params.range].to,\r\n              },\r\n              companyId: $stateParams.id,\r\n            },\r\n            order: \"date DESC\",\r\n          }\r\n        })\r\n        .$promise\r\n        .then(function(data) {\r\n          vm.Events = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  ContactsCompanyEditLogoController.$inject = [\"$uibModalInstance\", \"ModalParams\", \"Company\", \"FileUploader\"];\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyEditLogoController\", ContactsCompanyEditLogoController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyEditLogoController($uibModalInstance, ModalParams, Company, FileUploader) {\r\n    var vm = this;\r\n\r\n    vm.Company = ModalParams.Company;\r\n    vm.Uploader = new FileUploader({\r\n      vm: vm,\r\n      url: '/api/Containers/' + vm.Company.id + '/upload',\r\n    });\r\n    vm.Uploader.onCompleteItem = function(item, response, status, headers) {\r\n      vm.Company.logo = '/api/Containers/' + vm.Company.id + '/download/' + item.file.name;\r\n      Company.upsert(vm.Company);\r\n    };\r\n    vm.Uploader.onAfterAddingFile = function(item) {\r\n      // console.info('After adding a file', item);\r\n      // console.info(vm.Uploader.queue);\r\n    };\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n\r\n    function Upload() {}\r\n\r\n\r\n    function activate() {\r\n\r\n    }\r\n\r\n    function Save() {\r\n      vm.Uploader.uploadItem(0);\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common', []);\r\n})();\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  routerHelperProvider.$inject = [\"$locationProvider\", \"$stateProvider\", \"$urlRouterProvider\"];\r\n  angular\r\n    .module('app._common')\r\n    .provider('routerHelper', routerHelperProvider);\r\n\r\n  /* @ngInject */\r\n  function routerHelperProvider($locationProvider, $stateProvider, $urlRouterProvider) {\r\n    /* jshint validthis:true */\r\n    this.$get = RouterHelper;\r\n\r\n    // $locationProvider.html5Mode(true);\r\n\r\n    RouterHelper.$inject = ['$state'];\r\n\r\n    function RouterHelper($state) {\r\n      var hasOtherwise = false;\r\n\r\n      var service = {\r\n        configureStates: configureStates,\r\n        getStates: getStates\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureStates(states, otherwisePath) {\r\n        states.forEach(function(state) {\r\n\r\n          var config = {\r\n            controllerAs: 'vm',\r\n          };\r\n\r\n          angular.extend(config, state.config);\r\n\r\n          if (config.views) {\r\n            _.each(config.views, function(item) {\r\n              item.controllerAs = 'vm';\r\n            });\r\n          }\r\n\r\n          $stateProvider.state(state.state, config);\r\n        });\r\n        if (otherwisePath && !hasOtherwise) {\r\n          hasOtherwise = true;\r\n          $urlRouterProvider.otherwise(otherwisePath);\r\n        }\r\n      }\r\n\r\n      function getStates() {\r\n        return $state.get();\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('modalHelper', modalHelperProvider);\r\n\r\n  /* @ngInject */\r\n  function modalHelperProvider() {\r\n    /* jshint validthis:true */\r\n    modalHelper.$inject = [\"$uibModal\", \"$q\"];\r\n    this.$get = modalHelper;\r\n\r\n    /* @ngInject */\r\n    function modalHelper($uibModal, $q) {\r\n\r\n      var service = {\r\n        configureModals: configureModals\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureModals(modals) {\r\n        var _ret = {};\r\n        angular.forEach(modals, function(modal) {\r\n          _ret[modal.modal] = function(obj) {\r\n            var config = {\r\n              controllerAs: 'vm',\r\n              resolve: {\r\n                ModalParams: function() {\r\n                  return obj || {};\r\n                }\r\n              }\r\n            };\r\n            angular.extend(config, modal.config);\r\n\r\n            return $uibModal\r\n              .open(config)\r\n              .result\r\n              .then(ModalResultComplete)\r\n              .catch(ModalResultFailed);\r\n\r\n            function ModalResultComplete(response) {\r\n              return response;\r\n            }\r\n\r\n            function ModalResultFailed(reason) {\r\n              if (reason && reason !== \"backdrop click\") {\r\n                return $q.reject();\r\n              }\r\n            }\r\n          };\r\n        });\r\n        return _ret;\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .provider('configHelper', configHelperProvider);\n\n  /* @ngInject */\n  function configHelperProvider() {\n    /* jshint validthis:true */\n    this.$get = ConfigHelper;\n\n    // $locationProvider.html5Mode(true);\n\n    ConfigHelper.$inject = [];\n\n    function ConfigHelper() {\n\n      var service = {\n        notifyConfig: notifyConfig\n      };\n\n      return service;\n\n      //function notifyConfig() {}\n      function notifyConfig(configName, message) {\n        message = message || {};\n        console.log(\"%c CONFIG - \" + configName + \" \", 'background: #9C27B0; color: #FFF', message);\n      }\n\n    }\n\n  }\n\n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('numberFixedLen', numberFixedLen)\n\n  /* @ngInject */\n  function numberFixedLen() {\n    return function(a, b) {\n      return (1e4 + a + \"\").slice(-b)\n    }\n  }\n\n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('join', join)\n\n  /* @ngInject */\n  function join() {\n    return function(array, separator) {\n      if (!array) {\n        return '';\n      }\n      if (!separator) {\n        separator = ', ';\n      }\n      return array.join(separator);\n    };\n  }\n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('fromNow', fromNow)\n\n  /* @ngInject */\n  function fromNow() {\n    return function(date) {\n      return moment(date).fromNow();\n    }\n  }\n  \n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('fileicon', fileicon)\n\n  /* @ngInject */\n  function fileicon() {\n    var _icons = {\n      \"application/pdf\": \"fa-file-pdf-o\",\n      \"application/powerpoint\": \"fa-file-powerpoint-o\",\n      \"application/x-msword\": \"fa-file-word-o\",\n      \"application/x-msexcel\": \"fa-file-excel-o\",\n      \"application/x-mspowerpoint\": \"fa-file-powerpoint-o\",\n      \"audio/x-mpeg-3\": \"fa-file-audio-o\",\n      \"image/gif\": \"fa-file-image-o\",\n      \"image/png\": \"fa-file-image-o\",\n      \"image/tiff\": \"fa-file-image-o\",\n      \"image/jpeg\": \"fa-file-image-o\",\n      \"video/avi\": \"fa-file-video-o\",\n      \"video/mpeg\": \"fa-file-video-o\",\n      \"video/msvideo\": \"fa-file-video-o\",\n      \"video/quicktime\": \"fa-file-video-o\",\n      \"application/zip\": \"fa-file-zip-o\"\n    };\n    return function(a) {\n      return _icons[a] || \"fa-file-o\";\n    }\n  }\n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('bytes', bytes)\n\n  /* @ngInject */\n  function bytes() {\n    return function(bytes, precision) {\n      if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) return '-';\n      if (bytes === 0) return 'Empty';\n      if (typeof precision === 'undefined') precision = 1;\n      var units = ['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'],\n        number = (Math.floor(Math.log(bytes) / Math.log(1024)));\n      return (bytes / Math.pow(1024, Math.floor(number))).toFixed(precision) + ' ' + units[number];\n    }\n  }\n}());\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('pwCheck', pwCheck)\r\n\r\n  /* @ngInject */\r\n  function pwCheck() {\r\n    return {\r\n      require: 'ngModel',\r\n      restrict: 'A',\r\n      link: function(scope, elem, attrs, ctrl) {\r\n        var firstPassword = '#' + attrs.pwCheck;\r\n        elem.add(firstPassword).on('keyup', function() {\r\n          scope.$apply(function() {\r\n            var v = elem.val() === $(firstPassword).val();\r\n            ctrl.$setValidity('pwmatch', v);\r\n          });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  ngThumb.$inject = [\"$window\"];\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngThumb', ngThumb)\r\n\r\n  /* @ngInject */\r\n  function ngThumb($window) {\r\n    var helper = {\r\n      support: !!($window.FileReader && $window.CanvasRenderingContext2D),\r\n      isFile: function(item) {\r\n        return angular.isObject(item) && item instanceof $window.File;\r\n      },\r\n      isImage: function(file) {\r\n        var type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\r\n        return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\r\n      }\r\n    };\r\n\r\n    return {\r\n      restrict: 'A',\r\n      template: '<canvas/>',\r\n      link: function(scope, element, attributes) {\r\n        if (!helper.support) {\r\n          console.log(\"ngThumb: FileReader not supported\");\r\n          return;\r\n        }\r\n\r\n\r\n        var params = scope.$eval(attributes.ngThumb);\r\n\r\n        console.log(\"ngThumb: params\", params);\r\n        if (!helper.isFile(params.file)) {\r\n          console.log(\"ngThumb: params.file is not a file\");\r\n          return;\r\n        }\r\n\r\n        if (!helper.isImage(params.file)) {\r\n          console.log(\"ngThumb: params.file is not an image\");\r\n          return;\r\n        }\r\n\r\n        var canvas = element.find('canvas');\r\n        var reader = new FileReader();\r\n\r\n        reader.onload = onLoadFile;\r\n        reader.readAsDataURL(params.file);\r\n\r\n        function onLoadFile(event) {\r\n          var img = new Image();\r\n          img.onload = onLoadImage;\r\n          img.src = event.target.result;\r\n        }\r\n\r\n        function onLoadImage() {\r\n          var width = params.width || this.width / this.height * params.height;\r\n          var height = params.height || this.height / this.width * params.width;\r\n          canvas.attr({\r\n            width: width,\r\n            height: height\r\n          });\r\n          canvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\r\n        }\r\n      }\r\n    };\r\n  }\r\n})();\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngPrint', ngPrint)\r\n\r\n  /* @ngInject */\r\n  function ngPrint() {\r\n    var printSection = document.getElementById('printSection');\r\n    // if there is no printing section, create one\r\n    if (!printSection) {\r\n      printSection = document.createElement('div');\r\n      printSection.id = 'printSection';\r\n      document.body.appendChild(printSection);\r\n    }\r\n\r\n    function link(scope, element, attrs) {\r\n\r\n      element.on('click', function() {\r\n        var elemToPrint = document.getElementById(attrs.printElementId);\r\n        if (elemToPrint) {\r\n          printElement(elemToPrint);\r\n        }\r\n      });\r\n\r\n      var beforePrint = function() {\r\n        console.log('Functionality to run before printing.');\r\n      };\r\n      var afterPrint = function() {\r\n        console.log('Functionality to run after printing');\r\n        printSection.innerHTML = '';\r\n      };\r\n\r\n      if (window.matchMedia) {\r\n        var mediaQueryList = window.matchMedia('print');\r\n        mediaQueryList.addListener(function(mql) {\r\n          if (mql.matches) {\r\n            beforePrint();\r\n          } else {\r\n            afterPrint();\r\n          }\r\n        });\r\n      }\r\n\r\n      window.onbeforeprint = beforePrint;\r\n      window.onafterprint = afterPrint;\r\n\r\n    }\r\n\r\n    function printElement(elem) {\r\n      // clones the element you want to print\r\n      var domClone = elem.cloneNode(true);\r\n      printSection.appendChild(domClone);\r\n      window.print();\r\n    }\r\n    return {\r\n      link: link,\r\n      restrict: 'A'\r\n    };\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('errSrc', errSrc)\r\n\r\n  /* @ngInject */\r\n  function errSrc() {\r\n    return {\r\n      link: function(scope, element, attrs) {\r\n        if (!attrs.ngSrc) {\r\n          attrs.$set('src', attrs.errSrc);\r\n        }\r\n\r\n        element.bind('error', function() {\r\n\r\n          if (attrs.errSrc == \"REMOVE\") {\r\n            element.remove();\r\n            return;\r\n          }\r\n          if (attrs.src != attrs.errSrc) {\r\n            attrs.$set('src', attrs.errSrc);\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngConfirmClick', ngConfirmClick)\r\n\r\n  /* @ngInject */\r\n  function ngConfirmClick() {\r\n    return {\r\n      priority: -1,\r\n      restrict: 'A',\r\n      link: function(scope, element, attrs){\r\n        element.bind('click', function(e){\r\n          var message = attrs.ngConfirmClick;\r\n          if(message && !confirm(message)){\r\n            e.stopImmediatePropagation();\r\n            e.preventDefault();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .constant(\"topmenu\", [{\n      name: \"States\",\n      link: \"#\",\n      subtree: [{\n        name: \"state 1\",\n        link: \"state1\"\n      }, {\n        name: \"state 2\",\n        link: \"state2\"\n      }]\n    }])\n\n}());\n;(function() {\r\n  'use strict';\r\n\r\n  angular.module('app', [\r\n\r\n    'ngResource',\r\n    'ngSanitize',\r\n    'ngCookies',\r\n    'ui.bootstrap',\r\n    'ui.router',\r\n    'ui.router.tabs',\r\n    'ui.navbar',\r\n    'angularFileUpload',\r\n\r\n    'lbServices',\r\n\r\n    'app.auth',\r\n    'app.dashboard',\r\n    'app.contacts',\r\n    'app.files',\r\n    'app.settings',\r\n    'app._common',\r\n  ]);\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  appRun.$inject = [\"$rootScope\", \"$state\", \"$stateParams\"];\r\n  angular\r\n    .module('app')\r\n    .run(appRun);\r\n\r\n  /* @ngInject */\r\n  function appRun($rootScope, $state, $stateParams) {\r\n    $rootScope.APP = APP;\r\n\r\n    $rootScope.$on('$stateChangeSuccess', function(event, toState) {\r\n      if (toState.title) {\r\n        $rootScope.title = (toState.title) ? toState.title : APP.description;\r\n      } else {\r\n        $rootScope.title = null;\r\n      }\r\n\r\n      // if (toState.tool) {\r\n      //   $rootScope.tool = _.findWhere(TOOLS, {\r\n      //     alias: toState.tool\r\n      //   });\r\n      //   $rootScope.title = ' - ' + $rootScope.tool.title + \" v\" + $rootScope.tool.version;\r\n      // } else {\r\n      //   $rootScope.tool = null;\r\n      // }\r\n    });\r\n\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  LocationConfig.$inject = [\"configHelperProvider\", \"$locationProvider\"];\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig(configHelperProvider, $locationProvider) {\r\n    $locationProvider.html5Mode(true);\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  LocationConfig.$inject = [\"$httpProvider\"];\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig($httpProvider) {\r\n    $httpProvider.defaults.withCredentials = true;\r\n    $httpProvider.defaults.useXDomain = true;\r\n    delete $httpProvider.defaults.headers.common['X-Requested-With'];\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings', []);\r\n})();\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  SettingsService.$inject = [\"$resource\"];\r\n  angular\r\n    .module('app.settings')\r\n    .factory('SettingsService', SettingsService);\r\n\r\n  /* @ngInject */\r\n  function SettingsService($resource) {\r\n\r\n    var service = {\r\n      GetSettings: GetSettings,\r\n      GetSetting: GetSetting,\r\n      SaveSetting: SaveSetting,\r\n      DeleteSetting: DeleteSetting,\r\n    }\r\n\r\n    return service;\r\n\r\n    function GetSettings(params) {\r\n      return $resource(APP.Service + \"_design/models/_view/Settings\")\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.DrewAt || 0;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n    function GetSetting(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function SaveSetting(Setting) {\r\n      Setting.Type = \"Setting\";\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeleteSetting(Setting) {\r\n\r\n      Setting._deleted = true;\r\n      Setting.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n}());\r\n;(function() {\n  'use strict';\n\r\n  appRun.$inject = [\"routerHelper\"];\n  angular\n    .module('app.settings')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routerHelper) {\n    routerHelper.configureStates(getStates());\n  }\n\n  function getStates() {\n    return [{\n      state: 'app.settings',\n      config: {\n        abstract: true,\n        url: '/settings',\n        controller: \"SettingsController\",\n        templateUrl: 'src/settings/_common/layout.html',\n      }\n    }, {\n      state: 'app.settings.general',\n      config: {\n        url: '/general',\n        controller: \"SettingsGeneralController\",\n        templateUrl: 'src/settings/general/view.html',\n      }\n    }, {\n      state: 'app.settings.users',\n      config: {\n        url: '/users',\n        controller: \"SettingsUsersController\",\n        templateUrl: 'src/settings/users/view.html',\n      }\n    }, {\n      state: 'app.settings.profile',\n      config: {\n        url: '/profile',\n        controller: \"SettingsProfileController\",\n        templateUrl: 'src/settings/profile/view.html',\n      }\n    }, {\n      state: 'app.settings.help',\n      config: {\n        url: '/help',\n        controller: \"SettingsHelpController\",\n        templateUrl: 'src/settings/help/view.html',\n      }\n    }, {\n      state: 'app.settings.terms',\n      config: {\n        url: '/terms',\n        controller: \"SettingsTermsController\",\n        templateUrl: 'src/settings/terms/view.html',\n      }\n    }];\n  }\n\n}());\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .factory('SettingsModals', SettingsModals);\r\n\r\n  SettingsModals.$inject = ['modalHelper'];\r\n\r\n  function SettingsModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"ChangePassword\",\r\n        config: {\r\n          templateUrl: 'src/settings/changepassword/view.html',\r\n          controller: \"ChangePasswordController\",\r\n          size: \"sm\"\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  SettingsController.$inject = [\"$state\", \"SettingsService\", \"SettingsModals\"];\r\n  angular\r\n    .module('app.settings')\r\n    .controller('SettingsController', SettingsController);\r\n\r\n  /* @ngInject */\r\n  function SettingsController($state, SettingsService, SettingsModals) {\r\n    var vm = this;\r\n\r\n    vm.ChangePassword = ChangePassword;\r\n\r\n    activate();\r\n\r\n    function activate() {}\r\n\r\n    function ChangePassword() {\r\n      SettingsModals\r\n        .ChangePassword()\r\n        .then(function() {\r\n          $state.go(\"auth.logout\", {\r\n            ref: \"SIGNOUT\"\r\n          });\r\n        });\r\n    }\r\n\r\n  }\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .controller('SettingsGeneralController', SettingsGeneralController);\r\n\r\n  /* @ngInject */\r\n  function SettingsGeneralController() {\r\n    var vm = this;\r\n\r\n    activate();\r\n\r\n    function activate() {}\r\n\r\n  }\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  ChangePasswordController.$inject = [\"$uibModalInstance\", \"ModalParams\", \"User\", \"toaster\"];\r\n  angular\r\n    .module('app.settings')\r\n    .controller(\"ChangePasswordController\", ChangePasswordController);\r\n\r\n  /* @ngInject */\r\n  function ChangePasswordController($uibModalInstance, ModalParams, User, toaster) {\r\n    var vm = this;\r\n\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n    function activate() {}\r\n\r\n    function Save() {\r\n      vm.loading = true;\r\n      User.prototype$updateAttributes({\r\n          id: User.getCurrentId(),\r\n          password: vm.Password\r\n        })\r\n        .$promise\r\n        .then(function(user) {\r\n          toaster.pop('success', \"Password Changed\");\r\n          vm.loading = false;\r\n          $uibModalInstance.close();\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.files', []);\r\n})();\r\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.files')\n    .factory('FilesModals', FilesModals);\n\n  FilesModals.$inject = ['modalHelper'];\n\n  function FilesModals(modalHelper) {\n    return modalHelper.configureModals(getModals());\n\n    function getModals() {\n      return [{\n        modal: \"AddFiles\",\n        config: {\n          templateUrl: 'src/files/add/view.html',\n          controller: \"FilesAddController\",\n          size:\"md\",\n        }\n      }];\n    }\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  FilesAddController.$inject = [\"$uibModalInstance\", \"ModalParams\", \"FileUploader\"];\n  angular\n    .module('app.files')\n    .controller(\"FilesAddController\", FilesAddController);\n\n  /* @ngInject */\n  function FilesAddController($uibModalInstance, ModalParams, FileUploader) {\n    var vm = this;\n\n    vm.Label = ModalParams.Label;\n    vm.Container = ModalParams.Container;\n\n    vm.Upload = Upload;\n\n    activate();\n\n    function activate() {}\n\n\n    function Upload() {}\n\n    var uploader = vm.uploader = new FileUploader({\n      vm: vm, // to automatically update the html. Default: $rootScope\n      url: '/api/containers/' + vm.Container + '/upload',\n      // formData: [{\n      //   key: 'value'\n      // }]\n    });\n\n    // ADDING FILTERS\n    // uploader.filters.push({\n    //   name: 'filterName',\n    //   fn: function(item, options) { // second user filter\n    //     console.info('filter2');\n    //     return true;\n    //   }\n    // });\n\n    // REGISTER HANDLERS\n    // --------------------\n    // uploader.onAfterAddingFile = function(item) {\n    //   console.info('After adding a file', item);\n    // };\n    // // --------------------\n    // uploader.onAfterAddingAll = function(items) {\n    //   console.info('After adding all files', items);\n    // };\n    // // --------------------\n    // uploader.onWhenAddingFileFailed = function(item, filter, options) {\n    //   console.info('When adding a file failed', item);\n    // };\n    // // --------------------\n    // uploader.onBeforeUploadItem = function(item) {\n    //   console.info('Before upload', item);\n    // };\n    // // --------------------\n    // uploader.onProgressItem = function(item, progress) {\n    //   console.info('Progress: ' + progress, item);\n    // };\n    // // --------------------\n    // uploader.onProgressAll = function(progress) {\n    //   console.info('Total progress: ' + progress);\n    // };\n    // --------------------\n    // uploader.onSuccessItem = function(item, response, status, headers) {\n    //   console.info('Success', response, status, headers);\n    //   vm.$broadcast('uploadCompleted', item);\n    // };\n    // --------------------\n    uploader.onErrorItem = function(item, response, status, headers) {\n      item.error = response.error;\n      // console.info('Error', response, status, headers);\n    };\n    // // --------------------\n    // uploader.onCancelItem = function(item, response, status, headers) {\n    //   console.info('Cancel', response, status);\n    // };\n    // // --------------------\n    // uploader.onCompleteItem = function(item, response, status, headers) {\n    //   console.info('Complete', response, status, headers);\n    // };\n    // // --------------------\n    // uploader.onCompleteAll = function() {\n    //   console.info('Complete all');\n    // };\n\n  }\n\n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\r\n  RoutesConfig.$inject = [\"configHelper\", \"routerHelper\"];\n  angular\n    .module('app.contacts')\n    .run(RoutesConfig);\n\n  /* @ngInject */\n  function RoutesConfig(configHelper, routerHelper) {\n    routerHelper.configureStates(getStates());\n  }\n\n  function getStates() {\n    return [{\n      state: 'app.contacts',\n      config: {\n        abstract: true,\n        url: \"/contacts\",\n        template: '<ui-view/>',\n      }\n    }, {\n      state: 'app.contacts.overview',\n      config: {\n        title: 'Contacts Overview',\n        url: \"/\",\n        templateUrl: 'src/contacts/overview/view.html',\n        controller: 'ContactsOverviewController',\n      }\n    }, {\n      state: 'app.contacts.person',\n      config: {\n        title: 'Person',\n        url: \"/person/:id\",\n        templateUrl: 'src/contacts/person/view.html',\n        controller: 'ContactsPersonController',\n      }\n    }];\n  }\n\n}());\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .factory('ContactsModals', ContactsModals);\n\n  ContactsModals.$inject = ['modalHelper'];\n\n  function ContactsModals(modalHelper) {\n    return modalHelper.configureModals(getModals());\n\n    function getModals() {\n      return [{\n        modal: \"AddPerson\",\n        config: {\n          templateUrl: 'src/contacts/addperson/view.html',\n          controller: \"ContactsAddPersonController\",\n          size:\"sm\",\n        }\n      }, {\n        modal: \"AddCompany\",\n        config: {\n          templateUrl: 'src/contacts/addcompany/view.html',\n          controller: \"ContactsAddCompanyController\",\n          size:\"sm\",\n        }\n      }, {\n        modal: \"AddEvent\",\n        config: {\n          templateUrl: 'src/contacts/addevent/view.html',\n          controller: \"ContactsAddEventController\",\n        }\n      }, {\n        modal: \"ExportImport\",\n        config: {\n          templateUrl: 'src/contacts/exportimport/view.html',\n          controller: \"ContactsExportImportController\",\n        }\n      }];\n    }\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsTopMenuController.$inject = [\"$state\", \"ContactsModals\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsTopMenuController\", ContactsTopMenuController);\n\n  /* @ngInject */\n  function ContactsTopMenuController($state, ContactsModals) {\n    var vm = this;\n\n    vm.AddCompany = AddCompany;\n    vm.AddPerson = AddPerson;\n    vm.AddEvent = AddEvent;\n    vm.ExportImport = ExportImport;\n\n    activate();\n\n    function activate() {\n\n    }\n\n    function AddCompany() {\n      ContactsModals\n        .AddCompany()\n        .then(function(response) {\n          $state.go(\"app.contacts.company\", {\n            id: response.id\n          });\n        });\n    }\n\n    function AddPerson() {\n      ContactsModals\n        .AddPerson()\n        .then(function(response) {\n          $state.go(\"app.contacts.person\", {\n            id: response.id\n          });\n        });\n    }\n\n    function AddEvent() {\n      ContactsModals\n        .AddEvent()\n        .then(function(response) {\n          $state.go(\"app.contacts.events.event\", {\n            id: response.id\n          });\n        });\n    }\n\n    function ExportImport() {\n      ContactsModals\n        .ExportImport()\n        .then(function() {});\n    }\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsOverviewController.$inject = [\"Company\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsOverviewController\", ContactsOverviewController);\n\n  /* @ngInject */\n  function ContactsOverviewController(Company) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      _getAccessed();\n    }\n\n    function _getAccessed() {\n      vm.loading_accessed = true;\n      Company.find({\n          filter: {\n            limit: 10,\n            order: \"lastAccess DESC\",\n          }\n        })\n        .$promise\n        .then(function(_companies) {\n          vm.accessed = _companies;\n        })\n        .finally(function() {\n          vm.loading_accessed = false;\n        });\n    }\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsContactController\", ContactsContactController);\n\n  /* @ngInject */\n  function ContactsContactController() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n    }\n\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsAddPersonController.$inject = [\"$uibModalInstance\", \"ModalParams\", \"Company\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsAddPersonController\", ContactsAddPersonController);\n\n  /* @ngInject */\n  function ContactsAddPersonController($uibModalInstance, ModalParams, Company) {\n    var vm = this;\n\n    vm.Save = Save;\n\n    activate();\n\n    function activate() {\n      loadCompanies();\n    }\n\n    function loadCompanies() {\n      vm.Companies = Company.find({\n        filter:{\n          order: 'name ASC',\n        }\n      });\n    }\n\n    function Save() {}\n\n\n  }\n\n}());\n;(function() {\n  'use strict';\n\r\n  ContactsAddCompanyController.$inject = [\"$uibModalInstance\", \"Company\"];\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsAddCompanyController\", ContactsAddCompanyController);\n\n  /* @ngInject */\n  function ContactsAddCompanyController($uibModalInstance, Company) {\n    var vm = this;\n\n    vm.Save = Save;\n\n    activate();\n\n    function activate() {\n      loadCompanies();\n    }\n\n    function loadCompanies() {\n      vm.Companies = Company.find({\n        filter: {\n          order: 'name ASC',\n        }\n      });\n    }\n\n    function Save() {\n      Company\n        .create(vm.Company)\n        .$promise\n        .then(function(_company) {\n          $uibModalInstance.close(_company);\n        });\n    }\n\n\n  }\n\n}());\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth', [])\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  AuthLoginController.$inject = [\"$stateParams\", \"$state\", \"LoginMessages\", \"User\"];\r\n  angular\r\n    .module('app.auth')\r\n    .controller('AuthLoginController', AuthLoginController);\r\n\r\n  /* @ngInject */\r\n  function AuthLoginController($stateParams, $state, LoginMessages, User) {\r\n    var vm = this;\r\n\r\n    vm.loading = false;\r\n    vm.SignIn = SignIn;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n\r\n      if ($stateParams.ref) {\r\n        _signMessage($stateParams.ref.toUpperCase());\r\n      }\r\n    }\r\n\r\n    function SignIn() {\r\n\r\n      vm.loading = true;\r\n      vm.Alert = false;\r\n\r\n      User\r\n        .login(angular.copy(vm.credentials))\r\n        .$promise\r\n        .then(function(response) {\r\n          $state.go(\"app.dashboard\");\r\n        }, function(rejection) {\r\n          vm.credentials.password = null;\r\n          vm.loading = false;\r\n          _signMessage(rejection.data.error.code.toUpperCase());\r\n        });\r\n    }\r\n\r\n    function _signMessage(code) {\r\n      vm.Alert = LoginMessages[code];\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\r\n  RoutesConfig.$inject = [\"configHelper\", \"routerHelper\"];\n  angular\n    .module('app._common')\n    .run(RoutesConfig);\n\n  /* @ngInject */\n  function RoutesConfig(configHelper, routerHelper) {\n    routerHelper.configureStates(getStates(), \"/\");\n  }\n\n  function getStates() {\n    return [{\n      state: 'app',\n      config: {\n        abstract: true,\n        resolve: {\n          isAuthenticated: function($state, User, $timeout) {\n            $timeout(function() {\n              if (!User.isAuthenticated()) {\n                $state.go(\"auth.login\");\n                return false;\n              }\n            });\n          }\n        },\n        views: {\n          \"\": {\n            templateUrl: 'src/_common/views/layout.html',\n            controller: function(User) {\n              var vm = this;\n\n              User\n                .getCurrent()\n                .$promise\n                .then(function(_user) {\n                  vm.username = _user.username;\n                });\n\n            },\n          },\n          \"menu-contacts@app\": {\n            templateUrl: 'src/contacts/topmenu/view.html',\n            controller: \"ContactsTopMenuController\",\n          },\n          // \"menu-contacts@app\": {\n          //   templateUrl: 'src/contacts/topmenu/view.html',\n          //   controller: \"ContactsTopMenuController\",\n          // },\n        }\n      }\n    }];\n  }\n\n}());\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.static', []);\r\n})();\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  RoutesConfig.$inject = [\"configHelper\", \"routerHelper\"];\r\n  angular\r\n    .module('app.static')\r\n    .run(RoutesConfig);\r\n\r\n  /* @ngInject */\r\n  function RoutesConfig(configHelper, routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.about',\r\n      config: {\r\n        title: 'About',\r\n        url: \"/about\",\r\n        templateUrl: 'views/static/pages/about.html',\r\n        controller: function() {\r\n          var vm = this;\r\n          vm.libs = [{\r\n            name: \"AngularJS\",\r\n            href: \"https://angularjs.org/\"\r\n          }];\r\n        }\r\n      }\r\n    }, {\r\n      state: 'app.tos',\r\n      config: {\r\n        title: 'Terms of Use',\r\n        url: \"/tos\",\r\n        templateUrl: 'views/static/pages/tos.html',\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.dashboard', []);\r\n})();\r\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\r\n  RoutesConfig.$inject = [\"configHelper\", \"routerHelper\"];\n  angular\n    .module('app.dashboard')\n    .run(RoutesConfig);\n\n  /* @ngInject */\n  function RoutesConfig(configHelper, routerHelper) {\n    routerHelper.configureStates(getStates());\n  }\n\n  function getStates() {\n    return [{\n      state: 'app.dashboard',\n      config: {\n        title: 'Dashboard',\n        url: \"/\",\n        templateUrl: 'src/dashboard/view.html',\n        controller: 'DashboardController',\n      }\n    }];\n  }\n\n}());\n;(function() {\n  'use strict';\n\n  angular\n    .module('app.dashboard')\n    .controller(\"DashboardController\", DashboardController);\n\n  /* @ngInject */\n  function DashboardController() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      vm.news = _.sortBy([{\n        \"date\": \"Mon Dec 14 2015 21:45:38 GMT+0000\",\n        \"content\": \"Tempor ut qui non mollit qui.\",\n        \"title\": \"ea enim veniam laboris ullamco\",\n        \"url\": \"http://google.com\"\n      }, {\n        \"date\": \"Sun Dec 06 2015 21:45:38 GMT+0000\",\n        \"content\": \"Officia id nulla nulla id ipsum minim.\",\n        \"title\": \"cillum aute deserunt labore est\",\n        \"url\": \"http://google.com\"\n      }, {\n        \"date\": \"Tue Dec 08 2015 21:45:38 GMT+0000\",\n        \"content\": \"Ullamco ut voluptate aliqua laboris nostrud.\",\n        \"title\": \"velit occaecat adipisicing tempor sit\",\n        \"url\": \"http://google.com\"\n      }, {\n        \"date\": \"Fri Dec 11 2015 21:45:38 GMT+0000\",\n        \"content\": \"Ipsum nisi non adipisicing ex aute veniam.\",\n        \"title\": \"non do ipsum et cillum\",\n        \"url\": \"http://google.com\"\n      }], 'date');\n    }\n\n\n  }\n\n}());\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'auth',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n      }\r\n    }, {\r\n      state: 'auth.login',\r\n      config: {\r\n        url: '/login',\r\n        params: {\r\n          ref: null\r\n        },\r\n        templateUrl: \"src/auth/login/view.html\",\r\n        controller: \"AuthLoginController\",\r\n      }\r\n    }, {\r\n      state: 'auth.logout',\r\n      config: {\r\n        url: '/logout',\r\n        template: \"<ui-view/>\",\r\n        controller: function(User, $state) {\r\n          User\r\n            .logout()\r\n            .$promise\r\n            .then(function() {})\r\n            .finally(function() {\r\n              localStorage.clear();\r\n              $state.go(\"auth.login\", {\r\n                ref: \"SIGNOUT\"\r\n              });\r\n            })\r\n\r\n        },\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  AuthInterceptor.$inject = [\"$q\", \"$injector\", \"$cookies\"];\r\n  AuthInterceptorConfig.$inject = [\"$httpProvider\"];\r\n  angular\r\n    .module('app.auth')\r\n    .config(AuthInterceptorConfig)\r\n    .factory('AuthInterceptor', AuthInterceptor);\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptor($q, $injector, $cookies) {\r\n\r\n    return {\r\n      responseError: function(rejection) {\r\n        console.log(\"rejection\", rejection);\r\n        if (rejection.status === 401 && rejection.config.url != \"/api/Users/login\") {\r\n          localStorage.clear();\r\n          var $state = $injector.get('$state');\r\n          $state.go('auth.login', {\r\n            ref: \"SESSIONEND\"\r\n          });\r\n        }\r\n        return $q.reject(rejection);\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptorConfig($httpProvider) {\r\n    $httpProvider.interceptors.push(\"AuthInterceptor\");\r\n  }\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .constant('LoginMessages', {\r\n      SESSIONEND: {\r\n        Type: \"danger\",\r\n        Message: \"You were signed out\",\r\n        Details: \"Probably your session was timed out\",\r\n      },\r\n      SIGNOUT: {\r\n        Type: \"success\",\r\n        Message: \"You were signed out\",\r\n        Details: \"You may login again using the form\",\r\n      },\r\n      REGISTERED: {\r\n        Type: \"success\",\r\n        Message: \"Your account is ready, you can login now\",\r\n        Details: false,\r\n      },\r\n      AUTHERROR: {\r\n        Type: \"danger\",\r\n        Message: \"Authentication Error\",\r\n        Details: null,\r\n      },\r\n      UNAVAILABLE: {\r\n        Type: \"danger\",\r\n        Message: \"Service is not available\",\r\n        Details: \"Please try again later. If the problem insist, contact your system administrator\",\r\n      },\r\n      LOGIN_FAILED: {\r\n        Type: \"danger\",\r\n        Message: \"Name or password is incorrect\",\r\n        Details: \"Please try again\",\r\n      },\r\n    });\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  appRun.$inject = [\"$rootScope\", \"$state\", \"$stateParams\"];\r\n  angular\r\n    .module('app')\r\n    .run(appRun);\r\n\r\n  /* @ngInject */\r\n  function appRun($rootScope, $state, $stateParams) {\r\n\r\n    $rootScope.APP = APP;\r\n    $rootScope.$on('$stateChangeStart', function(evt, to, params) {\r\n\r\n      if (to.redirectTo) {\r\n        evt.preventDefault();\r\n        $state.go(to.redirectTo, params);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n}());\r\n;(function() { window.APP={\"name\":\"Balance\",\"description\":\"An online business suite for managing simple operations of small companies.\",\"version\":\"0.1.0\",\"repository\":\"https://github.com/ChristosGeorgiou/balance.git\",\"author\":{\"name\":\"Christos Georgiou\",\"email\":\"xris.georgiou@gmail.com\",\"url\":\"http://christosgeorgiou.gr\"},\"client\":{\"name\":\"Demo Company\"}}; })()","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .factory('CompanyModals', CompanyModals);\r\n\r\n  CompanyModals.$inject = ['modalHelper'];\r\n\r\n  function CompanyModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"EditLogo\",\r\n        config: {\r\n          templateUrl: 'src/contacts/company/editlogo/view.html',\r\n          controller: \"ContactsCompanyEditLogoController\",\r\n          size:\"md\",\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyController\", ContactsCompanyController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyController($stateParams, Company, CompanyTabs, CompanyModals) {\r\n    var vm = this;\r\n\r\n    vm.Tabs = CompanyTabs;\r\n\r\n    vm.EditLogo = EditLogo;\r\n\r\n    vm.Print = function() {\r\n      var docDefinition = {\r\n        content: 'ελλάδα Ά an sample PDF printed with pdfMakeThis is an sample PDF printed with pdfMakeThis is an sample PDF printed with pdfMake'\r\n      };\r\n      // or become pretty complex (having multi-level tables, images, lists, paragraphs, margins, styles etc...).\r\n      //\r\n      // As soon as you have the document-definition-object, you're ready to create and open/print/download the PDF:\r\n\r\n      // open the PDF in a new window\r\n      pdfMake.createPdf(docDefinition).open();\r\n\r\n      // print the PDF (temporarily Chrome-only)\r\n      // pdfMake.createPdf(docDefinition).print();\r\n\r\n      // download the PDF (temporarily Chrome-only)\r\n      // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n    }\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.Company = Company.findById({\r\n        id: $stateParams.id,\r\n      });\r\n    }\r\n\r\n    function EditLogo() {\r\n      \r\n      CompanyModals\r\n        .EditLogo({\r\n          Company: vm.Company\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .constant(\"CompanyTabs\", [{\n      heading: {\n        icon: \"bars\",\n        title: 'Overview'\n      },\n      route: 'app.contacts.company.profile.overview',\n    }, {\n      heading: {\n        icon: \"calendar\",\n        class: \"hidden-xs\",\n        title: 'Events'\n      },\n      route: 'app.contacts.company.profile.events',\n    }, {\n      heading: {\n        icon: \"money\",\n        class: \"hidden-xs\",\n        title: 'Transactions'\n      },\n      route: 'app.contacts.company.profile.transactions',\n    }, {\n      heading: {\n        icon: \"files-o\",\n        class: \"hidden-xs\",\n        title: 'Files'\n      },\n      route: 'app.contacts.company.profile.files',\n    }]);\n\n\n}());\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyTransactionsController\", ContactsCompanyTransactionsController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyTransactionsController(\r\n    $stateParams,\r\n    Transaction,\r\n    DataFilters,\r\n    ChartGroups) {\r\n\r\n    var vm = this;\r\n\r\n    vm.filter = {\r\n      where: {\r\n        companyId: $stateParams.id,\r\n      },\r\n      order: \"date ASC\",\r\n    }\r\n\r\n    vm.chart = {\r\n      labels: [],\r\n      data: [\r\n        []\r\n      ],\r\n      params: {\r\n        group: \"weekly\",\r\n      },\r\n      options: {\r\n        bezierCurve: false,\r\n        datasetFill: false,\r\n      }\r\n    };\r\n\r\n    vm.params = {\r\n      filter: \"one_month\",\r\n    }\r\n\r\n    vm.DataFilters = DataFilters;\r\n    vm.ChartGroups = ChartGroups;\r\n\r\n    vm.LoadTransactions = LoadTransactions;\r\n    vm.ReloadChart = ReloadChart;\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadTransactions();\r\n    }\r\n\r\n    function LoadTransactions() {\r\n      vm.loading = true;\r\n\r\n      return Transaction\r\n        .find({\r\n          filter: vm.filter\r\n        })\r\n        .$promise\r\n        .then(function(data) {\r\n          var _total = 0;\r\n          _.each(data, function(transaction) {\r\n            _total += transaction.amount;\r\n            transaction.total = _total;\r\n          });\r\n          vm.Transactions = data;\r\n          vm.ReloadChart();\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function ReloadChart() {\r\n      console.log(vm.chart.params.group);\r\n      vm.chart.labels = [];\r\n      vm.chart.data[0] = [];\r\n      var grouped_transactions = _.groupBy(vm.Transactions, function(transaction) {\r\n        return moment(transaction.date).format(ChartGroups[vm.chart.params.group].value);\r\n      });\r\n\r\n      _.each(grouped_transactions, function(transactions, keydate) {\r\n        var _date_total = _.reduce(transactions, function(total, transaction) {\r\n          return Math.round(transaction.amount + total);\r\n        }, 0);\r\n        vm.chart.labels.push(keydate);\r\n        vm.chart.data[0].push(_date_total);\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .constant(\"DataFilters\", {\r\n      one_month: {\r\n        alias: \"one_month\",\r\n        label: \"+-1 Month\",\r\n        value: {\r\n          // date\r\n        },\r\n      },\r\n      three_months: {\r\n        alias: \"three_months\",\r\n        label: \"+-3 Months\",\r\n        value: {\r\n          // date\r\n        },\r\n      },\r\n      all: {\r\n        alias: \"all\",\r\n        label: \"All Transactions\",\r\n        value: false,\r\n      }\r\n    })\r\n    .constant(\"ChartGroups\", {\r\n      daily: {\r\n        alias: \"daily\",\r\n        label: \"Daily\",\r\n        value: \"DD/MM/YYYY\",\r\n      },\r\n      weekly: {\r\n        alias: \"weekly\",\r\n        label: \"Weekly\",\r\n        value: \"[W]ww MM/YYYY\",\r\n      },\r\n      monthly: {\r\n        alias: \"monthly\",\r\n        label: \"Monthly\",\r\n        value: \"MM/YYYY\",\r\n      }\r\n    })\r\n\r\n})();\r\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyPersonsController\", ContactsCompanyPersonsController);\n\n  /* @ngInject */\n  function ContactsCompanyPersonsController($stateParams,Person) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      _loadPersons();\n    }\n\n    function _loadPersons() {\n      vm.loading = true;\n      return Person\n        .find({\n          filter: {\n            where: {\n              companyId: $stateParams.id,\n            },\n            order: \"fullname ASC\",\n          }\n        })\n        .$promise\n        .then(function(data) {\n          vm.Persons = data;\n        })\n        .finally(function() {\n          vm.loading = false;\n        });\n    }\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyOverviewController\", ContactsCompanyOverviewController);\n\n  /* @ngInject */\n  function ContactsCompanyOverviewController($stateParams,Company) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      _loadCompany();\n    }\n\n    function _loadCompany() {\n      vm.loading = true;\n      return Company\n        .findById({\n          id: $stateParams.id,\n          filter: {\n            include: [\"persons\"],\n          }\n        })\n        .$promise\n        .then(function(data) {\n          vm.Company = data;\n        })\n        .finally(function() {\n          vm.loading = false;\n        });\n    }\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyMapController\", ContactsCompanyMapController);\n\n  /* @ngInject */\n  function ContactsCompanyMapController($stateParams, Company, $timeout) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n\n      vm.loading = true;\n\n      vm.center = {};\n      vm.markers = {};\n\n      Company.findById({\n          id: $stateParams.id,\n        })\n        .$promise\n        .then(function(company) {\n          vm.Company = company;\n\n          $timeout(function() {\n\n            vm.center = {\n              lat: parseFloat(company.location.lat),\n              lng: parseFloat(company.location.lon),\n              zoom: 14,\n            };\n            vm.markers = {\n              company: {\n                message: company.name + \"<br/><small>\" + vm.Company.location.street + \"</small>\",\n                lat: parseFloat(company.location.lat),\n                lng: parseFloat(company.location.lon),\n                opacity: 0.8,\n                focus: true,\n              }\n            };\n\n            vm.loading = false;\n\n          }, 1000);\n\n        });\n    }\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsCompanyFilesController\", ContactsCompanyFilesController);\n\n  /* @ngInject */\n  function ContactsCompanyFilesController($stateParams, Container, FilesModals) {\n    var vm = this;\n\n    vm.container = $stateParams.id;\n    vm.UploadFiles = UploadFiles;\n    // vm.Download = Download;\n\n    activate();\n\n    function activate() {\n      _loadFiles();\n    }\n\n    function UploadFiles() {\n      FilesModals\n        .AddFiles({\n          Label: \"Company\",\n          Container: vm.container\n        })\n        .then(function() {\n          _loadFiles();\n        });\n    }\n\n    //\n    // function Download(file) {\n    //   Container\n    //     .download({\n    //       container: vm.container,\n    //       file: file,\n    //     })\n    //     .$promise\n    //     .then(function(data) {\n    //       console.log(data);\n    //     });\n    // }\n\n    function _loadFiles() {\n      vm.loading = true;\n      return Container\n        .getFiles({\n          container: vm.container,\n        })\n        .$promise\n        .then(function(data) {\n          vm.Files = data;\n        })\n        .finally(function() {\n          vm.loading = false;\n        });\n    }\n\n\n  }\n\n}());\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyEventsController\", ContactsCompanyEventsController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyEventsController($stateParams, Event) {\r\n    var vm = this;\r\n\r\n    vm.reload = reload;\r\n\r\n    vm.params = {\r\n      range: \"WEEK\",\r\n    };\r\n\r\n    var _ranges = {\r\n      \"WEEK\": {\r\n        from: moment().subtract(7, \"days\"),\r\n        to: moment().add(7, \"days\"),\r\n      },\r\n      \"HALFMONTH\": {\r\n        from: moment().subtract(15, \"days\"),\r\n        to: moment().add(15, \"days\"),\r\n      },\r\n      \"MONTH\": {\r\n        from: moment().subtract(1, \"month\"),\r\n        to: moment().add(1, \"month\"),\r\n      }\r\n    };\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      _loadEvents();\r\n    }\r\n\r\n    function reload() {\r\n      activate();\r\n    }\r\n\r\n    function _loadEvents() {\r\n      vm.loading = true;\r\n      return Event\r\n        .find({\r\n          filter: {\r\n            where: {\r\n              date: {\r\n                gt: _ranges[vm.params.range].from,\r\n                lt: _ranges[vm.params.range].to,\r\n              },\r\n              companyId: $stateParams.id,\r\n            },\r\n            order: \"date DESC\",\r\n          }\r\n        })\r\n        .$promise\r\n        .then(function(data) {\r\n          vm.Events = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.contacts')\r\n    .controller(\"ContactsCompanyEditLogoController\", ContactsCompanyEditLogoController);\r\n\r\n  /* @ngInject */\r\n  function ContactsCompanyEditLogoController($uibModalInstance, ModalParams, Company, FileUploader) {\r\n    var vm = this;\r\n\r\n    vm.Company = ModalParams.Company;\r\n    vm.Uploader = new FileUploader({\r\n      vm: vm,\r\n      url: '/api/Containers/' + vm.Company.id + '/upload',\r\n    });\r\n    vm.Uploader.onCompleteItem = function(item, response, status, headers) {\r\n      vm.Company.logo = '/api/Containers/' + vm.Company.id + '/download/' + item.file.name;\r\n      Company.upsert(vm.Company);\r\n    };\r\n    vm.Uploader.onAfterAddingFile = function(item) {\r\n      // console.info('After adding a file', item);\r\n      // console.info(vm.Uploader.queue);\r\n    };\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n\r\n    function Upload() {}\r\n\r\n\r\n    function activate() {\r\n\r\n    }\r\n\r\n    function Save() {\r\n      vm.Uploader.uploadItem(0);\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common', []);\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('routerHelper', routerHelperProvider);\r\n\r\n  /* @ngInject */\r\n  function routerHelperProvider($locationProvider, $stateProvider, $urlRouterProvider) {\r\n    /* jshint validthis:true */\r\n    this.$get = RouterHelper;\r\n\r\n    // $locationProvider.html5Mode(true);\r\n\r\n    RouterHelper.$inject = ['$state'];\r\n\r\n    function RouterHelper($state) {\r\n      var hasOtherwise = false;\r\n\r\n      var service = {\r\n        configureStates: configureStates,\r\n        getStates: getStates\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureStates(states, otherwisePath) {\r\n        states.forEach(function(state) {\r\n\r\n          var config = {\r\n            controllerAs: 'vm',\r\n          };\r\n\r\n          angular.extend(config, state.config);\r\n\r\n          if (config.views) {\r\n            _.each(config.views, function(item) {\r\n              item.controllerAs = 'vm';\r\n            });\r\n          }\r\n\r\n          $stateProvider.state(state.state, config);\r\n        });\r\n        if (otherwisePath && !hasOtherwise) {\r\n          hasOtherwise = true;\r\n          $urlRouterProvider.otherwise(otherwisePath);\r\n        }\r\n      }\r\n\r\n      function getStates() {\r\n        return $state.get();\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('modalHelper', modalHelperProvider);\r\n\r\n  /* @ngInject */\r\n  function modalHelperProvider() {\r\n    /* jshint validthis:true */\r\n    this.$get = modalHelper;\r\n\r\n    /* @ngInject */\r\n    function modalHelper($uibModal, $q) {\r\n\r\n      var service = {\r\n        configureModals: configureModals\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureModals(modals) {\r\n        var _ret = {};\r\n        angular.forEach(modals, function(modal) {\r\n          _ret[modal.modal] = function(obj) {\r\n            var config = {\r\n              controllerAs: 'vm',\r\n              resolve: {\r\n                ModalParams: function() {\r\n                  return obj || {};\r\n                }\r\n              }\r\n            };\r\n            angular.extend(config, modal.config);\r\n\r\n            return $uibModal\r\n              .open(config)\r\n              .result\r\n              .then(ModalResultComplete)\r\n              .catch(ModalResultFailed);\r\n\r\n            function ModalResultComplete(response) {\r\n              return response;\r\n            }\r\n\r\n            function ModalResultFailed(reason) {\r\n              if (reason && reason !== \"backdrop click\") {\r\n                return $q.reject();\r\n              }\r\n            }\r\n          };\r\n        });\r\n        return _ret;\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .provider('configHelper', configHelperProvider);\n\n  /* @ngInject */\n  function configHelperProvider() {\n    /* jshint validthis:true */\n    this.$get = ConfigHelper;\n\n    // $locationProvider.html5Mode(true);\n\n    ConfigHelper.$inject = [];\n\n    function ConfigHelper() {\n\n      var service = {\n        notifyConfig: notifyConfig\n      };\n\n      return service;\n\n      //function notifyConfig() {}\n      function notifyConfig(configName, message) {\n        message = message || {};\n        console.log(\"%c CONFIG - \" + configName + \" \", 'background: #9C27B0; color: #FFF', message);\n      }\n\n    }\n\n  }\n\n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('numberFixedLen', numberFixedLen)\n\n  /* @ngInject */\n  function numberFixedLen() {\n    return function(a, b) {\n      return (1e4 + a + \"\").slice(-b)\n    }\n  }\n\n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('join', join)\n\n  /* @ngInject */\n  function join() {\n    return function(array, separator) {\n      if (!array) {\n        return '';\n      }\n      if (!separator) {\n        separator = ', ';\n      }\n      return array.join(separator);\n    };\n  }\n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('fromNow', fromNow)\n\n  /* @ngInject */\n  function fromNow() {\n    return function(date) {\n      return moment(date).fromNow();\n    }\n  }\n  \n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('fileicon', fileicon)\n\n  /* @ngInject */\n  function fileicon() {\n    var _icons = {\n      \"application/pdf\": \"fa-file-pdf-o\",\n      \"application/powerpoint\": \"fa-file-powerpoint-o\",\n      \"application/x-msword\": \"fa-file-word-o\",\n      \"application/x-msexcel\": \"fa-file-excel-o\",\n      \"application/x-mspowerpoint\": \"fa-file-powerpoint-o\",\n      \"audio/x-mpeg-3\": \"fa-file-audio-o\",\n      \"image/gif\": \"fa-file-image-o\",\n      \"image/png\": \"fa-file-image-o\",\n      \"image/tiff\": \"fa-file-image-o\",\n      \"image/jpeg\": \"fa-file-image-o\",\n      \"video/avi\": \"fa-file-video-o\",\n      \"video/mpeg\": \"fa-file-video-o\",\n      \"video/msvideo\": \"fa-file-video-o\",\n      \"video/quicktime\": \"fa-file-video-o\",\n      \"application/zip\": \"fa-file-zip-o\"\n    };\n    return function(a) {\n      return _icons[a] || \"fa-file-o\";\n    }\n  }\n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .filter('bytes', bytes)\n\n  /* @ngInject */\n  function bytes() {\n    return function(bytes, precision) {\n      if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) return '-';\n      if (bytes === 0) return 'Empty';\n      if (typeof precision === 'undefined') precision = 1;\n      var units = ['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'],\n        number = (Math.floor(Math.log(bytes) / Math.log(1024)));\n      return (bytes / Math.pow(1024, Math.floor(number))).toFixed(precision) + ' ' + units[number];\n    }\n  }\n}());\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('pwCheck', pwCheck)\r\n\r\n  /* @ngInject */\r\n  function pwCheck() {\r\n    return {\r\n      require: 'ngModel',\r\n      restrict: 'A',\r\n      link: function(scope, elem, attrs, ctrl) {\r\n        var firstPassword = '#' + attrs.pwCheck;\r\n        elem.add(firstPassword).on('keyup', function() {\r\n          scope.$apply(function() {\r\n            var v = elem.val() === $(firstPassword).val();\r\n            ctrl.$setValidity('pwmatch', v);\r\n          });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngThumb', ngThumb)\r\n\r\n  /* @ngInject */\r\n  function ngThumb($window) {\r\n    var helper = {\r\n      support: !!($window.FileReader && $window.CanvasRenderingContext2D),\r\n      isFile: function(item) {\r\n        return angular.isObject(item) && item instanceof $window.File;\r\n      },\r\n      isImage: function(file) {\r\n        var type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\r\n        return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\r\n      }\r\n    };\r\n\r\n    return {\r\n      restrict: 'A',\r\n      template: '<canvas/>',\r\n      link: function(scope, element, attributes) {\r\n        if (!helper.support) {\r\n          console.log(\"ngThumb: FileReader not supported\");\r\n          return;\r\n        }\r\n\r\n\r\n        var params = scope.$eval(attributes.ngThumb);\r\n\r\n        console.log(\"ngThumb: params\", params);\r\n        if (!helper.isFile(params.file)) {\r\n          console.log(\"ngThumb: params.file is not a file\");\r\n          return;\r\n        }\r\n\r\n        if (!helper.isImage(params.file)) {\r\n          console.log(\"ngThumb: params.file is not an image\");\r\n          return;\r\n        }\r\n\r\n        var canvas = element.find('canvas');\r\n        var reader = new FileReader();\r\n\r\n        reader.onload = onLoadFile;\r\n        reader.readAsDataURL(params.file);\r\n\r\n        function onLoadFile(event) {\r\n          var img = new Image();\r\n          img.onload = onLoadImage;\r\n          img.src = event.target.result;\r\n        }\r\n\r\n        function onLoadImage() {\r\n          var width = params.width || this.width / this.height * params.height;\r\n          var height = params.height || this.height / this.width * params.width;\r\n          canvas.attr({\r\n            width: width,\r\n            height: height\r\n          });\r\n          canvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\r\n        }\r\n      }\r\n    };\r\n  }\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngPrint', ngPrint)\r\n\r\n  /* @ngInject */\r\n  function ngPrint() {\r\n    var printSection = document.getElementById('printSection');\r\n    // if there is no printing section, create one\r\n    if (!printSection) {\r\n      printSection = document.createElement('div');\r\n      printSection.id = 'printSection';\r\n      document.body.appendChild(printSection);\r\n    }\r\n\r\n    function link(scope, element, attrs) {\r\n\r\n      element.on('click', function() {\r\n        var elemToPrint = document.getElementById(attrs.printElementId);\r\n        if (elemToPrint) {\r\n          printElement(elemToPrint);\r\n        }\r\n      });\r\n\r\n      var beforePrint = function() {\r\n        console.log('Functionality to run before printing.');\r\n      };\r\n      var afterPrint = function() {\r\n        console.log('Functionality to run after printing');\r\n        printSection.innerHTML = '';\r\n      };\r\n\r\n      if (window.matchMedia) {\r\n        var mediaQueryList = window.matchMedia('print');\r\n        mediaQueryList.addListener(function(mql) {\r\n          if (mql.matches) {\r\n            beforePrint();\r\n          } else {\r\n            afterPrint();\r\n          }\r\n        });\r\n      }\r\n\r\n      window.onbeforeprint = beforePrint;\r\n      window.onafterprint = afterPrint;\r\n\r\n    }\r\n\r\n    function printElement(elem) {\r\n      // clones the element you want to print\r\n      var domClone = elem.cloneNode(true);\r\n      printSection.appendChild(domClone);\r\n      window.print();\r\n    }\r\n    return {\r\n      link: link,\r\n      restrict: 'A'\r\n    };\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('errSrc', errSrc)\r\n\r\n  /* @ngInject */\r\n  function errSrc() {\r\n    return {\r\n      link: function(scope, element, attrs) {\r\n        if (!attrs.ngSrc) {\r\n          attrs.$set('src', attrs.errSrc);\r\n        }\r\n\r\n        element.bind('error', function() {\r\n\r\n          if (attrs.errSrc == \"REMOVE\") {\r\n            element.remove();\r\n            return;\r\n          }\r\n          if (attrs.src != attrs.errSrc) {\r\n            attrs.$set('src', attrs.errSrc);\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngConfirmClick', ngConfirmClick)\r\n\r\n  /* @ngInject */\r\n  function ngConfirmClick() {\r\n    return {\r\n      priority: -1,\r\n      restrict: 'A',\r\n      link: function(scope, element, attrs){\r\n        element.bind('click', function(e){\r\n          var message = attrs.ngConfirmClick;\r\n          if(message && !confirm(message)){\r\n            e.stopImmediatePropagation();\r\n            e.preventDefault();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .constant(\"topmenu\", [{\n      name: \"States\",\n      link: \"#\",\n      subtree: [{\n        name: \"state 1\",\n        link: \"state1\"\n      }, {\n        name: \"state 2\",\n        link: \"state2\"\n      }]\n    }])\n\n}());\n","(function() {\r\n  'use strict';\r\n\r\n  angular.module('app', [\r\n\r\n    'ngResource',\r\n    'ngSanitize',\r\n    'ngCookies',\r\n    'ui.bootstrap',\r\n    'ui.router',\r\n    'ui.router.tabs',\r\n    'ui.navbar',\r\n    'angularFileUpload',\r\n\r\n    'lbServices',\r\n\r\n    'app.auth',\r\n    'app.dashboard',\r\n    'app.contacts',\r\n    'app.files',\r\n    'app.settings',\r\n    'app._common',\r\n  ]);\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .run(appRun);\r\n\r\n  /* @ngInject */\r\n  function appRun($rootScope, $state, $stateParams) {\r\n    $rootScope.APP = APP;\r\n\r\n    $rootScope.$on('$stateChangeSuccess', function(event, toState) {\r\n      if (toState.title) {\r\n        $rootScope.title = (toState.title) ? toState.title : APP.description;\r\n      } else {\r\n        $rootScope.title = null;\r\n      }\r\n\r\n      // if (toState.tool) {\r\n      //   $rootScope.tool = _.findWhere(TOOLS, {\r\n      //     alias: toState.tool\r\n      //   });\r\n      //   $rootScope.title = ' - ' + $rootScope.tool.title + \" v\" + $rootScope.tool.version;\r\n      // } else {\r\n      //   $rootScope.tool = null;\r\n      // }\r\n    });\r\n\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig(configHelperProvider, $locationProvider) {\r\n    $locationProvider.html5Mode(true);\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig($httpProvider) {\r\n    $httpProvider.defaults.withCredentials = true;\r\n    $httpProvider.defaults.useXDomain = true;\r\n    delete $httpProvider.defaults.headers.common['X-Requested-With'];\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings', []);\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .factory('SettingsService', SettingsService);\r\n\r\n  /* @ngInject */\r\n  function SettingsService($resource) {\r\n\r\n    var service = {\r\n      GetSettings: GetSettings,\r\n      GetSetting: GetSetting,\r\n      SaveSetting: SaveSetting,\r\n      DeleteSetting: DeleteSetting,\r\n    }\r\n\r\n    return service;\r\n\r\n    function GetSettings(params) {\r\n      return $resource(APP.Service + \"_design/models/_view/Settings\")\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.DrewAt || 0;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n    function GetSetting(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function SaveSetting(Setting) {\r\n      Setting.Type = \"Setting\";\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeleteSetting(Setting) {\r\n\r\n      Setting._deleted = true;\r\n      Setting.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n}());\r\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.settings')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routerHelper) {\n    routerHelper.configureStates(getStates());\n  }\n\n  function getStates() {\n    return [{\n      state: 'app.settings',\n      config: {\n        abstract: true,\n        url: '/settings',\n        controller: \"SettingsController\",\n        templateUrl: 'src/settings/_common/layout.html',\n      }\n    }, {\n      state: 'app.settings.general',\n      config: {\n        url: '/general',\n        controller: \"SettingsGeneralController\",\n        templateUrl: 'src/settings/general/view.html',\n      }\n    }, {\n      state: 'app.settings.users',\n      config: {\n        url: '/users',\n        controller: \"SettingsUsersController\",\n        templateUrl: 'src/settings/users/view.html',\n      }\n    }, {\n      state: 'app.settings.profile',\n      config: {\n        url: '/profile',\n        controller: \"SettingsProfileController\",\n        templateUrl: 'src/settings/profile/view.html',\n      }\n    }, {\n      state: 'app.settings.help',\n      config: {\n        url: '/help',\n        controller: \"SettingsHelpController\",\n        templateUrl: 'src/settings/help/view.html',\n      }\n    }, {\n      state: 'app.settings.terms',\n      config: {\n        url: '/terms',\n        controller: \"SettingsTermsController\",\n        templateUrl: 'src/settings/terms/view.html',\n      }\n    }];\n  }\n\n}());\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .factory('SettingsModals', SettingsModals);\r\n\r\n  SettingsModals.$inject = ['modalHelper'];\r\n\r\n  function SettingsModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"ChangePassword\",\r\n        config: {\r\n          templateUrl: 'src/settings/changepassword/view.html',\r\n          controller: \"ChangePasswordController\",\r\n          size: \"sm\"\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .controller('SettingsController', SettingsController);\r\n\r\n  /* @ngInject */\r\n  function SettingsController($state, SettingsService, SettingsModals) {\r\n    var vm = this;\r\n\r\n    vm.ChangePassword = ChangePassword;\r\n\r\n    activate();\r\n\r\n    function activate() {}\r\n\r\n    function ChangePassword() {\r\n      SettingsModals\r\n        .ChangePassword()\r\n        .then(function() {\r\n          $state.go(\"auth.logout\", {\r\n            ref: \"SIGNOUT\"\r\n          });\r\n        });\r\n    }\r\n\r\n  }\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .controller('SettingsGeneralController', SettingsGeneralController);\r\n\r\n  /* @ngInject */\r\n  function SettingsGeneralController() {\r\n    var vm = this;\r\n\r\n    activate();\r\n\r\n    function activate() {}\r\n\r\n  }\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .controller(\"ChangePasswordController\", ChangePasswordController);\r\n\r\n  /* @ngInject */\r\n  function ChangePasswordController($uibModalInstance, ModalParams, User, toaster) {\r\n    var vm = this;\r\n\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n    function activate() {}\r\n\r\n    function Save() {\r\n      vm.loading = true;\r\n      User.prototype$updateAttributes({\r\n          id: User.getCurrentId(),\r\n          password: vm.Password\r\n        })\r\n        .$promise\r\n        .then(function(user) {\r\n          toaster.pop('success', \"Password Changed\");\r\n          vm.loading = false;\r\n          $uibModalInstance.close();\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.files', []);\r\n})();\r\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.files')\n    .factory('FilesModals', FilesModals);\n\n  FilesModals.$inject = ['modalHelper'];\n\n  function FilesModals(modalHelper) {\n    return modalHelper.configureModals(getModals());\n\n    function getModals() {\n      return [{\n        modal: \"AddFiles\",\n        config: {\n          templateUrl: 'src/files/add/view.html',\n          controller: \"FilesAddController\",\n          size:\"md\",\n        }\n      }];\n    }\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.files')\n    .controller(\"FilesAddController\", FilesAddController);\n\n  /* @ngInject */\n  function FilesAddController($uibModalInstance, ModalParams, FileUploader) {\n    var vm = this;\n\n    vm.Label = ModalParams.Label;\n    vm.Container = ModalParams.Container;\n\n    vm.Upload = Upload;\n\n    activate();\n\n    function activate() {}\n\n\n    function Upload() {}\n\n    var uploader = vm.uploader = new FileUploader({\n      vm: vm, // to automatically update the html. Default: $rootScope\n      url: '/api/containers/' + vm.Container + '/upload',\n      // formData: [{\n      //   key: 'value'\n      // }]\n    });\n\n    // ADDING FILTERS\n    // uploader.filters.push({\n    //   name: 'filterName',\n    //   fn: function(item, options) { // second user filter\n    //     console.info('filter2');\n    //     return true;\n    //   }\n    // });\n\n    // REGISTER HANDLERS\n    // --------------------\n    // uploader.onAfterAddingFile = function(item) {\n    //   console.info('After adding a file', item);\n    // };\n    // // --------------------\n    // uploader.onAfterAddingAll = function(items) {\n    //   console.info('After adding all files', items);\n    // };\n    // // --------------------\n    // uploader.onWhenAddingFileFailed = function(item, filter, options) {\n    //   console.info('When adding a file failed', item);\n    // };\n    // // --------------------\n    // uploader.onBeforeUploadItem = function(item) {\n    //   console.info('Before upload', item);\n    // };\n    // // --------------------\n    // uploader.onProgressItem = function(item, progress) {\n    //   console.info('Progress: ' + progress, item);\n    // };\n    // // --------------------\n    // uploader.onProgressAll = function(progress) {\n    //   console.info('Total progress: ' + progress);\n    // };\n    // --------------------\n    // uploader.onSuccessItem = function(item, response, status, headers) {\n    //   console.info('Success', response, status, headers);\n    //   vm.$broadcast('uploadCompleted', item);\n    // };\n    // --------------------\n    uploader.onErrorItem = function(item, response, status, headers) {\n      item.error = response.error;\n      // console.info('Error', response, status, headers);\n    };\n    // // --------------------\n    // uploader.onCancelItem = function(item, response, status, headers) {\n    //   console.info('Cancel', response, status);\n    // };\n    // // --------------------\n    // uploader.onCompleteItem = function(item, response, status, headers) {\n    //   console.info('Complete', response, status, headers);\n    // };\n    // // --------------------\n    // uploader.onCompleteAll = function() {\n    //   console.info('Complete all');\n    // };\n\n  }\n\n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .run(RoutesConfig);\n\n  /* @ngInject */\n  function RoutesConfig(configHelper, routerHelper) {\n    routerHelper.configureStates(getStates());\n  }\n\n  function getStates() {\n    return [{\n      state: 'app.contacts',\n      config: {\n        abstract: true,\n        url: \"/contacts\",\n        template: '<ui-view/>',\n      }\n    }, {\n      state: 'app.contacts.overview',\n      config: {\n        title: 'Contacts Overview',\n        url: \"/\",\n        templateUrl: 'src/contacts/overview/view.html',\n        controller: 'ContactsOverviewController',\n      }\n    }, {\n      state: 'app.contacts.person',\n      config: {\n        title: 'Person',\n        url: \"/person/:id\",\n        templateUrl: 'src/contacts/person/view.html',\n        controller: 'ContactsPersonController',\n      }\n    }];\n  }\n\n}());\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .factory('ContactsModals', ContactsModals);\n\n  ContactsModals.$inject = ['modalHelper'];\n\n  function ContactsModals(modalHelper) {\n    return modalHelper.configureModals(getModals());\n\n    function getModals() {\n      return [{\n        modal: \"AddPerson\",\n        config: {\n          templateUrl: 'src/contacts/addperson/view.html',\n          controller: \"ContactsAddPersonController\",\n          size:\"sm\",\n        }\n      }, {\n        modal: \"AddCompany\",\n        config: {\n          templateUrl: 'src/contacts/addcompany/view.html',\n          controller: \"ContactsAddCompanyController\",\n          size:\"sm\",\n        }\n      }, {\n        modal: \"AddEvent\",\n        config: {\n          templateUrl: 'src/contacts/addevent/view.html',\n          controller: \"ContactsAddEventController\",\n        }\n      }, {\n        modal: \"ExportImport\",\n        config: {\n          templateUrl: 'src/contacts/exportimport/view.html',\n          controller: \"ContactsExportImportController\",\n        }\n      }];\n    }\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsTopMenuController\", ContactsTopMenuController);\n\n  /* @ngInject */\n  function ContactsTopMenuController($state, ContactsModals) {\n    var vm = this;\n\n    vm.AddCompany = AddCompany;\n    vm.AddPerson = AddPerson;\n    vm.AddEvent = AddEvent;\n    vm.ExportImport = ExportImport;\n\n    activate();\n\n    function activate() {\n\n    }\n\n    function AddCompany() {\n      ContactsModals\n        .AddCompany()\n        .then(function(response) {\n          $state.go(\"app.contacts.company\", {\n            id: response.id\n          });\n        });\n    }\n\n    function AddPerson() {\n      ContactsModals\n        .AddPerson()\n        .then(function(response) {\n          $state.go(\"app.contacts.person\", {\n            id: response.id\n          });\n        });\n    }\n\n    function AddEvent() {\n      ContactsModals\n        .AddEvent()\n        .then(function(response) {\n          $state.go(\"app.contacts.events.event\", {\n            id: response.id\n          });\n        });\n    }\n\n    function ExportImport() {\n      ContactsModals\n        .ExportImport()\n        .then(function() {});\n    }\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsOverviewController\", ContactsOverviewController);\n\n  /* @ngInject */\n  function ContactsOverviewController(Company) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      _getAccessed();\n    }\n\n    function _getAccessed() {\n      vm.loading_accessed = true;\n      Company.find({\n          filter: {\n            limit: 10,\n            order: \"lastAccess DESC\",\n          }\n        })\n        .$promise\n        .then(function(_companies) {\n          vm.accessed = _companies;\n        })\n        .finally(function() {\n          vm.loading_accessed = false;\n        });\n    }\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsContactController\", ContactsContactController);\n\n  /* @ngInject */\n  function ContactsContactController() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n    }\n\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsAddPersonController\", ContactsAddPersonController);\n\n  /* @ngInject */\n  function ContactsAddPersonController($uibModalInstance, ModalParams, Company) {\n    var vm = this;\n\n    vm.Save = Save;\n\n    activate();\n\n    function activate() {\n      loadCompanies();\n    }\n\n    function loadCompanies() {\n      vm.Companies = Company.find({\n        filter:{\n          order: 'name ASC',\n        }\n      });\n    }\n\n    function Save() {}\n\n\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.contacts')\n    .controller(\"ContactsAddCompanyController\", ContactsAddCompanyController);\n\n  /* @ngInject */\n  function ContactsAddCompanyController($uibModalInstance, Company) {\n    var vm = this;\n\n    vm.Save = Save;\n\n    activate();\n\n    function activate() {\n      loadCompanies();\n    }\n\n    function loadCompanies() {\n      vm.Companies = Company.find({\n        filter: {\n          order: 'name ASC',\n        }\n      });\n    }\n\n    function Save() {\n      Company\n        .create(vm.Company)\n        .$promise\n        .then(function(_company) {\n          $uibModalInstance.close(_company);\n        });\n    }\n\n\n  }\n\n}());\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth', [])\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .controller('AuthLoginController', AuthLoginController);\r\n\r\n  /* @ngInject */\r\n  function AuthLoginController($stateParams, $state, LoginMessages, User) {\r\n    var vm = this;\r\n\r\n    vm.loading = false;\r\n    vm.SignIn = SignIn;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n\r\n      if ($stateParams.ref) {\r\n        _signMessage($stateParams.ref.toUpperCase());\r\n      }\r\n    }\r\n\r\n    function SignIn() {\r\n\r\n      vm.loading = true;\r\n      vm.Alert = false;\r\n\r\n      User\r\n        .login(angular.copy(vm.credentials))\r\n        .$promise\r\n        .then(function(response) {\r\n          $state.go(\"app.dashboard\");\r\n        }, function(rejection) {\r\n          vm.credentials.password = null;\r\n          vm.loading = false;\r\n          _signMessage(rejection.data.error.code.toUpperCase());\r\n        });\r\n    }\r\n\r\n    function _signMessage(code) {\r\n      vm.Alert = LoginMessages[code];\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app._common')\n    .run(RoutesConfig);\n\n  /* @ngInject */\n  function RoutesConfig(configHelper, routerHelper) {\n    routerHelper.configureStates(getStates(), \"/\");\n  }\n\n  function getStates() {\n    return [{\n      state: 'app',\n      config: {\n        abstract: true,\n        resolve: {\n          isAuthenticated: function($state, User, $timeout) {\n            $timeout(function() {\n              if (!User.isAuthenticated()) {\n                $state.go(\"auth.login\");\n                return false;\n              }\n            });\n          }\n        },\n        views: {\n          \"\": {\n            templateUrl: 'src/_common/views/layout.html',\n            controller: function(User) {\n              var vm = this;\n\n              User\n                .getCurrent()\n                .$promise\n                .then(function(_user) {\n                  vm.username = _user.username;\n                });\n\n            },\n          },\n          \"menu-contacts@app\": {\n            templateUrl: 'src/contacts/topmenu/view.html',\n            controller: \"ContactsTopMenuController\",\n          },\n          // \"menu-contacts@app\": {\n          //   templateUrl: 'src/contacts/topmenu/view.html',\n          //   controller: \"ContactsTopMenuController\",\n          // },\n        }\n      }\n    }];\n  }\n\n}());\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.static', []);\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.static')\r\n    .run(RoutesConfig);\r\n\r\n  /* @ngInject */\r\n  function RoutesConfig(configHelper, routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.about',\r\n      config: {\r\n        title: 'About',\r\n        url: \"/about\",\r\n        templateUrl: 'views/static/pages/about.html',\r\n        controller: function() {\r\n          var vm = this;\r\n          vm.libs = [{\r\n            name: \"AngularJS\",\r\n            href: \"https://angularjs.org/\"\r\n          }];\r\n        }\r\n      }\r\n    }, {\r\n      state: 'app.tos',\r\n      config: {\r\n        title: 'Terms of Use',\r\n        url: \"/tos\",\r\n        templateUrl: 'views/static/pages/tos.html',\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.dashboard', []);\r\n})();\r\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.dashboard')\n    .run(RoutesConfig);\n\n  /* @ngInject */\n  function RoutesConfig(configHelper, routerHelper) {\n    routerHelper.configureStates(getStates());\n  }\n\n  function getStates() {\n    return [{\n      state: 'app.dashboard',\n      config: {\n        title: 'Dashboard',\n        url: \"/\",\n        templateUrl: 'src/dashboard/view.html',\n        controller: 'DashboardController',\n      }\n    }];\n  }\n\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.dashboard')\n    .controller(\"DashboardController\", DashboardController);\n\n  /* @ngInject */\n  function DashboardController() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      vm.news = _.sortBy([{\n        \"date\": \"Mon Dec 14 2015 21:45:38 GMT+0000\",\n        \"content\": \"Tempor ut qui non mollit qui.\",\n        \"title\": \"ea enim veniam laboris ullamco\",\n        \"url\": \"http://google.com\"\n      }, {\n        \"date\": \"Sun Dec 06 2015 21:45:38 GMT+0000\",\n        \"content\": \"Officia id nulla nulla id ipsum minim.\",\n        \"title\": \"cillum aute deserunt labore est\",\n        \"url\": \"http://google.com\"\n      }, {\n        \"date\": \"Tue Dec 08 2015 21:45:38 GMT+0000\",\n        \"content\": \"Ullamco ut voluptate aliqua laboris nostrud.\",\n        \"title\": \"velit occaecat adipisicing tempor sit\",\n        \"url\": \"http://google.com\"\n      }, {\n        \"date\": \"Fri Dec 11 2015 21:45:38 GMT+0000\",\n        \"content\": \"Ipsum nisi non adipisicing ex aute veniam.\",\n        \"title\": \"non do ipsum et cillum\",\n        \"url\": \"http://google.com\"\n      }], 'date');\n    }\n\n\n  }\n\n}());\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'auth',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n      }\r\n    }, {\r\n      state: 'auth.login',\r\n      config: {\r\n        url: '/login',\r\n        params: {\r\n          ref: null\r\n        },\r\n        templateUrl: \"src/auth/login/view.html\",\r\n        controller: \"AuthLoginController\",\r\n      }\r\n    }, {\r\n      state: 'auth.logout',\r\n      config: {\r\n        url: '/logout',\r\n        template: \"<ui-view/>\",\r\n        controller: function(User, $state) {\r\n          User\r\n            .logout()\r\n            .$promise\r\n            .then(function() {})\r\n            .finally(function() {\r\n              localStorage.clear();\r\n              $state.go(\"auth.login\", {\r\n                ref: \"SIGNOUT\"\r\n              });\r\n            })\r\n\r\n        },\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .config(AuthInterceptorConfig)\r\n    .factory('AuthInterceptor', AuthInterceptor);\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptor($q, $injector, $cookies) {\r\n\r\n    return {\r\n      responseError: function(rejection) {\r\n        console.log(\"rejection\", rejection);\r\n        if (rejection.status === 401 && rejection.config.url != \"/api/Users/login\") {\r\n          localStorage.clear();\r\n          var $state = $injector.get('$state');\r\n          $state.go('auth.login', {\r\n            ref: \"SESSIONEND\"\r\n          });\r\n        }\r\n        return $q.reject(rejection);\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptorConfig($httpProvider) {\r\n    $httpProvider.interceptors.push(\"AuthInterceptor\");\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .constant('LoginMessages', {\r\n      SESSIONEND: {\r\n        Type: \"danger\",\r\n        Message: \"You were signed out\",\r\n        Details: \"Probably your session was timed out\",\r\n      },\r\n      SIGNOUT: {\r\n        Type: \"success\",\r\n        Message: \"You were signed out\",\r\n        Details: \"You may login again using the form\",\r\n      },\r\n      REGISTERED: {\r\n        Type: \"success\",\r\n        Message: \"Your account is ready, you can login now\",\r\n        Details: false,\r\n      },\r\n      AUTHERROR: {\r\n        Type: \"danger\",\r\n        Message: \"Authentication Error\",\r\n        Details: null,\r\n      },\r\n      UNAVAILABLE: {\r\n        Type: \"danger\",\r\n        Message: \"Service is not available\",\r\n        Details: \"Please try again later. If the problem insist, contact your system administrator\",\r\n      },\r\n      LOGIN_FAILED: {\r\n        Type: \"danger\",\r\n        Message: \"Name or password is incorrect\",\r\n        Details: \"Please try again\",\r\n      },\r\n    });\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .run(appRun);\r\n\r\n  /* @ngInject */\r\n  function appRun($rootScope, $state, $stateParams) {\r\n\r\n    $rootScope.APP = APP;\r\n    $rootScope.$on('$stateChangeStart', function(evt, to, params) {\r\n\r\n      if (to.redirectTo) {\r\n        evt.preventDefault();\r\n        $state.go(to.redirectTo, params);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n}());\r\n","(function() { window.APP={\"name\":\"Balance\",\"description\":\"An online business suite for managing simple operations of small companies.\",\"version\":\"0.1.0\",\"repository\":\"https://github.com/ChristosGeorgiou/balance.git\",\"author\":{\"name\":\"Christos Georgiou\",\"email\":\"xris.georgiou@gmail.com\",\"url\":\"http://christosgeorgiou.gr\"},\"client\":{\"name\":\"Demo Company\"}}; })()"],"sourceRoot":"/source/"}