<common-content>
  <common-content-header [title]="profileName" icon="cog"></common-content-header>
  <common-content-body style="height:100%">

    <fieldset>
      <h4>Configuration</h4>
      <div class="form-group">
        <label>Profile Name
          <small class="text-muted">required</small>
        </label>
        <input autocomplete="false" [(ngModel)]="profileEdit.name" class="form-control">
      </div>
      <h5>Database</h5>
      <div class="row">
        <div class="col-6">
          <div class="form-group">
            <label>Host</label>
            <input autocomplete="false" [(ngModel)]="profileEdit.remote.host" class="form-control">
          </div>
        </div>
        <div class="col-6">
          <div class="form-group">
            <label>Prefix</label>
            <input autocomplete="false" [(ngModel)]="profileEdit.remote.prefix" class="form-control">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <div class="form-group">
            <label>Username</label>
            <input autocomplete="false" [(ngModel)]="profileEdit.remote.username" class="form-control">
          </div>
        </div>
        <div class="col-6">
          <div class="form-group">
            <label>Password</label>
            <input autocomplete="false" [(ngModel)]="profileEdit.remote.password" class="form-control" type="password">
          </div>
        </div>
      </div>
      <div class="d-flex">
        <button class="btn btn-primary ml-auto" (click)="save()">
          <span class="far fa-save fa-fw"></span> Save</button>
      </div>
    </fieldset>

    <fieldset *ngIf="profileEdit.alias">
      <h4>Modules</h4>
      <ul class="list-group list-group-flush">
        <li class="list-group-item px-0" *ngFor="let module of modules">
          <div class="d-flex align-items-center">
            <div class="w-100">
              {{module.title}}
              <em>
                <small class="text-muted">{{module.id}}</small>
              </em>
              <small class="badge badge-success" *ngIf="activeModules[module.id]">ACTIVE</small>
              <br>
              <small class="text-muted" *ngIf="module.description">{{module.description}}</small>
            </div>
            <button type="button" class="btn btn-outline-dark btn-sm">
              <fa-layers class="fa-fw">
                <fa-icon [icon]="['fas','cog']"></fa-icon>
              </fa-layers>
            </button>
          </div>
        </li>
      </ul>
    </fieldset>

    <fieldset *ngIf="profileEdit.alias">
      <h4>Backup / Restore</h4>
      <p>You may export all profile data to json format as a backup or to move them to more clients.</p>
      <div class="d-flex justify-content-center">
        <button class="btn btn-outline-secondary mr-2" (click)="backup()" disabled>
          <fa-layers class="fa-fw">
            <fa-icon [icon]="['fas','cloud-download-alt']"></fa-icon>
          </fa-layers>
          Backup
        </button>
        <button class="btn btn-outline-secondary" (click)="restore()" disabled>
          <fa-layers class="fa-fw">
            <fa-icon [icon]="['fas','cloud-upload-alt']"></fa-icon>
          </fa-layers>
          Restore
        </button>
      </div>
    </fieldset>

    <fieldset class="text-danger" *ngIf="profileEdit.alias">
      <h4>Danger Zone</h4>
      <p>By deleting your profile, you immediately remove all local data(at your client). If you would like also to delete the remote data please check the option below. If you do not delete remote data, all data will be synced once this profile is recreated.</p>
      <div class="d-flex">
        <div class="d-flex flex-column">
          <div class="form-group form-check m-0">
            <input type="checkbox" class="form-check-input" id="deleteData" [(ngModel)]="deleteData">
            <label class="form-check-label" for="deleteData">Î™ understand that this is not reversable</label>
          </div>
          <div class="form-group form-check m-0">
            <input type="checkbox" class="form-check-input" id="deleteDataRemote" [(ngModel)]="deleteDataRemote">
            <label class="form-check-label" for="deleteDataRemote">Also delete remote data</label>
          </div>
        </div>
        <div class="ml-auto d-flex align-items-center">
          <button class="btn btn-danger" [disabled]="!deleteData" (click)="delete()">
            <fa-layers class="fa-fw">
              <fa-icon [icon]="['fas','trash-alt']"></fa-icon>
            </fa-layers>
            Delete</button>
        </div>
      </div>
    </fieldset>

  </common-content-body>
</common-content>
