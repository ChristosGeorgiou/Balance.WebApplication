<app-content [box]="true">
  <section role="title">General Options</section>
  <section>
    <h4>Name</h4>
    <div class="form-group input-group">
      <input #name [value]="workspace.name" class="form-control">
      <div class="input-group-append">
        <button class="btn btn-primary" (click)="rename(name.value)">Update</button>
      </div>
    </div>
  </section>
  <section>
    <h4>Raw Workspace</h4>
    <div class="rounded border mb-2">
      <ace-editor [(text)]="source" [mode]="'json'" [theme]="'tomorrow'" [options]="options" [readOnly]="false"
        [autoUpdateContent]="true" [durationBeforeCallback]="500" (textChanged)="validate()"
        style="min-height: 200px; width:100%; overflow: auto;"></ace-editor>
    </div>
    <button [disabled]="rawErr" class="btn btn-primary" (click)="updateRaw()">Update Raw</button> <span
      class="ml-4 text-danger" *ngIf="rawErr">There is a syntax error</span>
  </section>
  <section>
    <h4>Export</h4>
    <p>
      Export this workspace for import in another machine. <strong>This do not backup your data.</strong>
    </p>
    <button class="btn btn-primary" (click)="export()">Export Workspace</button>
  </section>
  <section>
    <h4>Telemetry</h4>
    <div class="mb-3">
      <div>When an error is occured, a debug event is send to <a target="_blank" href="https://sentry.io">sentry.io</a>.
        This will
        help further development as we may resolve issues faster.</div>
      <div class="custom-control custom-checkbox custom-control-inline">
        <input id="errorReport" [(ngModel)]="workspace.errorReport" (change)="save()" class="custom-control-input"
          type="checkbox">
        <label for="errorReport" class="custom-control-label">
          Send debug error data</label>
      </div>
    </div>
    <div class="mb-3">
      <div>Analytics help us to better understand how blanc have been used, so we may improve it. We use
        <a target="_blank" href="https://woopra.com">woopra.com</a> for this.</div>
      <div class="custom-control custom-checkbox custom-control-inline">
        <input id="analytics" [(ngModel)]="workspace.analytics" (change)="save()" class="custom-control-input"
          type="checkbox">
        <label for="analytics" class="custom-control-label">
          Send analytics data</label>
      </div>
    </div>
  </section>
  <section>
    <h4 class="text-danger">Danger Zone</h4>
    <p>
      Deleting your workspace, you immediately remove all local data. If you would like also
      to delete the remote data please check the appropriate option below. If you do not delete remote data, all
      data will be synced once again if workspace is recreated or imported.
    </p>
    <div class="form-group form-check">
      <input type="checkbox" class="form-check-input" id="deleteData" [(ngModel)]="deleteData">
      <label class="form-check-label" for="deleteData">Î™ understand that this is not reversable</label>
    </div>
    <div class="form-group form-check">
      <input type="checkbox" class="form-check-input" id="deleteDataRemote" [(ngModel)]="deleteDataRemote">
      <label class="form-check-label" for="deleteDataRemote">Also delete remote data</label>
    </div>
    <button class="btn btn-danger" [disabled]="!deleteData" (click)="delete()">
      Remove Workspace
    </button>
  </section>
</app-content>
<ng-template #loading>
  <app-spinner></app-spinner>
</ng-template>
