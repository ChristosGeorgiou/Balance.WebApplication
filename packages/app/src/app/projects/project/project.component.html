<app-content>
  <app-content-body [padding]="false" [full]="true">
    <ng-container *ngIf="(issues$ | async) as issues; else loader">
      <ng-container *ngIf="(issues | filterIssues:filters).length; else empty">
        <table class="table">
          <thead>
            <tr>
              <th style="width:80px">Status</th>
              <th>Issue</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let issue of issues | filterIssues:filters | slice:pStart:pEnd">
              <td>
                <span class="badge badge-dark w-100"
                  [ngStyle]="{'background-color':getStatus(issue.status).color}">{{getStatus(issue.status).alias}}</span>
              </td>
              <td>
                <div>
                  <a [routerLink]="['/projects/project',issue.projectId,'issue',issue['_id']]">{{issue.title}}</a>
                </div>
                <small class="text-muted">
                  {{issue.insertedAt | dfnsFormatDistanceToNow}} ago by
                  {{issue.insertedFrom}}
                </small>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-container>
    </ng-container>
  </app-content-body>
</app-content>

<ng-template #empty>
  <app-empty message="You don't have any issues yet" submessage="Click create to add your first one" icon="issues">
  </app-empty>
</ng-template>

<ng-template #loader>
  <app-spinner></app-spinner>
</ng-template>
