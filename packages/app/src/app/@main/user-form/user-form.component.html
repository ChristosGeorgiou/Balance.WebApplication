<div class="modal-header">
  <h4 class="modal-title">Setup User</h4>
</div>
<div class="modal-body">
  <form (ngSubmit)="create(username.value)">
    <div class="form-group">
      <label>Create new user</label>
      <div class="d-flex">
        <input #username required class="form-control" placeholder="username">
        <button type="button" class="btn btn-success ml-2" type="submit">Create</button>
      </div>
    </div>
  </form>
  <ng-container *ngIf="(users$ | async) as users;else loader">
    <ng-container *ngIf="users.length;else noUsers">
      <hr>
      <form (ngSubmit)="select(existing.value)">
        <div class="form-group">
          <label>Select an existing one</label>
          <div class="d-flex">
            <select #existing class="form-control">
              <option *ngFor="let u of users" [value]="u._id">{{u.username}}</option>
            </select>
            <button type="button" class="btn btn-primary ml-2" type="submit">Select</button>
          </div>
        </div>
      </form>
    </ng-container>
  </ng-container>
</div>

<ng-template #noUsers>
  <div class="d-flex align-items-center justify-content-center">
    No users were found
  </div>
</ng-template>

<ng-template #loader>
  <app-spinner></app-spinner>
</ng-template>
