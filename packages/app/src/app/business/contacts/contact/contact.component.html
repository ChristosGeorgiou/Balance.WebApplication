<ng-container *ngIf="contact$ | async as contact; else loader">
  <ng-container *ngIf="contact; else empty">
    <div class="d-flex h-100 w-100">
      <div style="width:250px; min-width: 250px;" class="p-3 bg-light border-right h-100 overflow-auto">
        <img style="width:217px;height:217px" class="rounded border img-fluid mb-3" [src]="contact.avatar"
          *ngIf="contact.avatar">
        <dl>
          <dt>Name</dt>
          <dd>{{contact.name}}</dd>
          <ng-container *ngIf="contact.description">
            <dt>Description</dt>
            <dd>{{contact.description}}</dd>
          </ng-container>
          <ng-container *ngIf="contact.tags">
            <dt>Tags</dt>
            <dd>{{contact.tags.join(', ')}}</dd>
          </ng-container>
        </dl>
        <hr>
        <ng-container *ngFor="let g of menu">
          <ul class="list-group list-group-customer-menu">
            <ng-container *ngFor="let i of g.items">
              <ng-container *ngIf="i.relative">
                <a [routerLink]="['/business/contacts',contact._id,i.url]" routerLinkActive="active"
                  class="list-group-item list-group-item-action">{{i.label}}</a>
              </ng-container>
              <ng-container *ngIf="!i.relative">
                <a [routerLink]="[i.url,{contact:contact._id}]" routerLinkActive="active"
                  class="list-group-item list-group-item-action">{{i.label}}</a>
              </ng-container>
            </ng-container>
          </ul>
        </ng-container>
      </div>
      <div class="flex-grow-1 h-100 overflow-auto">
        <router-outlet></router-outlet>
      </div>
    </div>
  </ng-container>
</ng-container>

<ng-template #empty>
  <app-empty message="Select a contact or create a new one" icon="desktop"></app-empty>
</ng-template>

<ng-template #loader>
  <app-spinner></app-spinner>
</ng-template>
